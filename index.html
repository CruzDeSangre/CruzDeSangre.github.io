<!DOCTYPE html>
<!--
  ╔════════════════════════════════════════════════════════════════════════════╗
  ║                           DEVELOPER REMINDER                               ║
  ╠════════════════════════════════════════════════════════════════════════════╣
  ║  ANNOTATION SYSTEM:                                                        ║
  ║  Annotations auto-number themselves from the FOOTNOTES registry in JS.     ║
  ║  To add a new annotation:                                                  ║
  ║  1. Add an entry to the FOOTNOTES object with a unique semantic ID         ║
  ║  2. Use <span class="annotation" data-note="your-id"></span> in HTML       ║
  ║  Numbers, tooltips, and the footnotes list are generated automatically.    ║
  ║  Order is based on first appearance in the DOM (across all 3 tables).      ║
  ║                                                                            ║
  ╠════════════════════════════════════════════════════════════════════════════╣
  ║  USA-EXCLUSIVE FEATURES TOGGLE:                                            ║
  ║  When adding new USA-exclusive content to tables, use these classes:       ║
  ║                                                                            ║
  ║  1. For ENTIRE CELLS with USA content:                                     ║
  ║     - Add class "usa-restricted" to the <td> for purple border             ║
  ║                                                                            ║
  ║  2. For PARTIAL content (hide part, show rest):                            ║
  ║     - Wrap USA-only text with <span class="usa-only">...</span>            ║
  ║                                                                            ║
  ║  3. For content that CHANGES when USA is hidden:                           ║
  ║     - Wrap original with <span class="usa-main">...</span>                 ║
  ║     - Add alternative with <span class="usa-alt">...</span>                ║
  ║       (usa-alt is hidden by default, shown when toggle is off)             ║
  ║                                                                            ║
  ║  4. For ENTIRE ROWS that should disappear (like Advertisements):           ║
  ║     - Add class "usa-ad-row" to the <tr>                                   ║
  ║                                                                            ║
  ║  Current USA-exclusive items:                                              ║
  ║     - Advertisements (ChatGPT Free/Go) - usa-ad-row                        ║
  ║     - Ecosystem memory (Gemini Pro/Ultra) - usa-only                       ║
  ║     - Gemini 3 Deep Think model (Gemini Ultra) - usa-only + usa-main/alt   ║
  ║     - Agent mode 6000 uses (Gemini Ultra) - usa-main/alt → "No"            ║
  ║     - Context window 196k (Gemini Ultra) - usa-main/alt → "1M"             ║
  ╚════════════════════════════════════════════════════════════════════════════╝
-->
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatGPT vs Gemini — Comparison</title>
  <meta name="description"
    content="Complete comparison between ChatGPT and Gemini AI assistants: subscription plans, benchmarks, and features.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-card: rgba(255, 255, 255, 0.02);
      --bg-hover: rgba(255, 255, 255, 0.04);
      --border-color: rgba(255, 255, 255, 0.08);
      --border-light: rgba(255, 255, 255, 0.04);
      --text-primary: #d9c5a2;
      --text-secondary: #b3a385;
      --text-muted: #8a7d65;

      /* Brand Colors */
      --chatgpt-primary: #10a37f;
      --chatgpt-bg: rgba(16, 163, 127, 0.08);
      --chatgpt-border: rgba(16, 163, 127, 0.2);
      --gemini-primary: #f34d65;
      --gemini-bg: rgba(243, 77, 101, 0.08);
      --gemini-border: rgba(243, 77, 101, 0.2);
      --claude-primary: #ff7e21;
      --claude-bg: rgba(255, 126, 33, 0.08);
      --claude-border: rgba(255, 126, 33, 0.2);

      /* Rating Colors */
      --rating-excellent: rgba(34, 197, 94, 0.15);
      --rating-excellent-border: rgba(34, 197, 94, 0.3);
      --rating-great: rgba(59, 130, 246, 0.15);
      --rating-great-border: rgba(59, 130, 246, 0.3);
      --rating-good: rgba(234, 179, 8, 0.15);
      --rating-good-border: rgba(234, 179, 8, 0.3);
      --rating-fair: rgba(249, 115, 22, 0.15);
      --rating-fair-border: rgba(249, 115, 22, 0.3);
      --rating-poor: rgba(239, 68, 68, 0.15);
      --rating-poor-border: rgba(239, 68, 68, 0.3);
      --rating-bad: rgba(168, 85, 247, 0.15);
      --rating-bad-border: rgba(168, 85, 247, 0.3);
      --rating-worst: rgba(30, 30, 30, 0.8);
      --rating-worst-border: rgba(80, 80, 80, 0.3);

      /* USA Restricted */
      --usa-restricted-border: rgba(168, 85, 247, 0.5);
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    /* Subtle background pattern */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse at 20% 0%, rgba(16, 163, 127, 0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(243, 77, 101, 0.06) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
    }

    /* Header */
    header {
      text-align: center;
      padding: 3rem 0 4rem;
      position: relative;
    }

    header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-color), transparent);
    }

    .title {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      letter-spacing: -0.03em;
      background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 0.95rem;
      font-weight: 400;
    }

    /* Tabs Navigation */
    .tabs-nav {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      padding: 0.5rem;
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }

    .tab-btn {
      background: transparent;
      border: none;
      padding: 0.875rem 1.5rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-secondary);
      position: relative;
    }

    .tab-btn:hover {
      color: var(--text-primary);
      background: var(--bg-hover);
    }

    .tab-btn.active {
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Tab Content */
    .tab-content {
      display: none;
      animation: fadeIn 0.15s ease-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Table Styles */
    .table-wrapper {
      overflow-x: auto;
      border-radius: 16px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      backdrop-filter: blur(10px);
      /* Hide scrollbar */
      -ms-overflow-style: none;
      /* IE and Edge */
      scrollbar-width: none;
      /* Firefox */
    }

    .table-wrapper::-webkit-scrollbar {
      display: none;
      /* Chrome, Safari, Opera */
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 1100px;
      font-size: 0.875rem;
    }

    thead {
      background: var(--bg-secondary);
    }

    th {
      text-transform: uppercase;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      color: var(--text-muted);
      padding: 1rem;
      text-align: center;
      border-bottom: 1px solid var(--border-color);
    }

    th:first-child {
      text-align: left;
      min-width: 200px;
    }

    /* Brand headers */
    .th-chatgpt {
      background: var(--chatgpt-bg);
      color: var(--chatgpt-primary);
      border-bottom: 2px solid var(--chatgpt-border);
    }

    .th-gemini {
      background: var(--gemini-bg);
      color: var(--gemini-primary);
      border-bottom: 2px solid var(--gemini-border);
    }

    td {
      padding: 1rem;
      text-align: center;
      border-bottom: 1px solid var(--border-light);
      color: var(--text-secondary);
      vertical-align: middle;
    }

    td:first-child {
      text-align: left;
      font-weight: 500;
      color: var(--text-primary);
      position: sticky;
      left: 0;
      background: var(--bg-primary);
      z-index: 5;
    }

    tbody tr {
      transition: background 0.2s ease;
    }

    tbody tr:hover {
      background: var(--bg-hover);
    }

    tbody tr:hover td:first-child {
      background: var(--bg-secondary);
    }

    .detail {
      display: block;
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
      opacity: 0.8;
    }

    /* Rating Colors */
    .rating-excellent {
      background: var(--rating-excellent);
    }

    .rating-great {
      background: var(--rating-great);
    }

    .rating-good {
      background: var(--rating-good);
    }

    .rating-fair {
      background: var(--rating-fair);
    }

    .rating-poor {
      background: var(--rating-poor);
    }

    .rating-bad {
      background: var(--rating-bad);
    }

    .rating-worst {
      background: var(--rating-worst);
    }

    /* Separator */
    .separator {
      border-left: 1px solid var(--border-color);
    }

    /* Legend */
    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-top: 1.5rem;
      padding: 1rem 1.5rem;
      background: var(--bg-card);
      border-radius: 12px;
      border: 1px solid var(--border-color);
      font-size: 0.8rem;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-secondary);
      margin-right: 1.5rem;
    }

    .legend-item:last-child {
      margin-right: 0;
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 3px;
    }

    .legend-excellent {
      background: rgba(34, 197, 94, 0.4);
    }

    .legend-great {
      background: rgba(59, 130, 246, 0.4);
    }

    .legend-good {
      background: rgba(234, 179, 8, 0.4);
    }

    .legend-fair {
      background: rgba(249, 115, 22, 0.4);
    }

    .legend-poor {
      background: rgba(239, 68, 68, 0.4);
    }

    .legend-bad {
      background: rgba(168, 85, 247, 0.4);
    }

    .legend-worst {
      background: rgba(60, 60, 60, 0.8);
    }

    .legend-usa-restricted {
      background: transparent;
      border: 2px solid rgba(168, 85, 247, 0.5);
    }

    /* USA Restricted Cell Style */
    .usa-restricted {
      box-shadow: inset 0 0 0 2px var(--usa-restricted-border);
    }

    /* Notes Section */
    .notes {
      margin-top: 2rem;
      padding: 1.5rem;
      background: var(--bg-card);
      border-radius: 12px;
      border: 1px solid var(--border-color);
    }

    .notes-title {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    /* Collapsible notes */
    .notes.collapsible .notes-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      user-select: none;
      margin-bottom: 0;
      transition: margin-bottom 0.3s ease;
    }

    .notes.collapsible .notes-header:hover .notes-title {
      color: var(--text-secondary);
    }

    .notes.collapsible .notes-header .notes-title {
      margin-bottom: 0;
      transition: color 0.2s ease;
    }

    .notes.collapsible.expanded .notes-header {
      margin-bottom: 1rem;
    }

    .notes-toggle {
      font-size: 0.7rem;
      color: var(--text-muted);
      transition: transform 0.3s ease;
    }

    .notes.collapsible.expanded .notes-toggle {
      transform: rotate(180deg);
    }

    .notes-content {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 0.3s ease, opacity 0.3s ease;
    }

    .notes.collapsible.expanded .notes-content {
      max-height: 500px;
      opacity: 1;
    }

    .notes-list {
      list-style: none;
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.8;
    }

    .notes-list li {
      position: relative;
      padding-left: 1.25rem;
    }

    .notes-list li::before {
      content: attr(data-num);
      position: absolute;
      left: 0;
      font-size: 0.65rem;
      color: var(--text-muted);
      vertical-align: super;
    }

    /* Section Title */
    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--text-primary);
      padding-left: 0.5rem;
      border-left: 3px solid rgba(139, 92, 246, 1);
    }

    .section-title.section-title-blue {
      border-left-color: rgb(59, 130, 246);
    }

    .section-title+.section-title,
    .table-wrapper+.section-title {
      margin-top: 3rem;
    }

    /* Benefits Cards */
    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 1.5rem;
    }

    .benefit-card {
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      padding: 2rem;
      transition: all 0.3s ease;
    }

    .benefit-card:hover {
      border-color: var(--border-light);
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .benefit-card.chatgpt {
      border-top: 3px solid var(--chatgpt-primary);
    }

    .benefit-card.gemini {
      border-top: 3px solid var(--gemini-primary);
    }

    .benefit-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .benefit-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
    }

    .chatgpt .benefit-icon {
      background: var(--chatgpt-bg);
      color: var(--chatgpt-primary);
    }

    .gemini .benefit-icon {
      background: var(--gemini-bg);
      color: var(--gemini-primary);
    }

    .benefit-title {
      font-size: 1.25rem;
      font-weight: 600;
    }

    .chatgpt .benefit-title {
      color: var(--chatgpt-primary);
    }

    .gemini .benefit-title {
      color: var(--gemini-primary);
    }

    .benefit-list {
      list-style: none;
    }

    .benefit-list li {
      position: relative;
      padding: 0.75rem 0 0.75rem 1.5rem;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border-light);
      font-size: 0.9rem;
    }

    .benefit-list li:last-child {
      border-bottom: none;
    }

    .benefit-list li::before {
      content: '→';
      position: absolute;
      left: 0;
      color: var(--text-muted);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      header {
        padding: 2rem 0;
      }

      .tabs-nav {
        width: 100%;
        flex-direction: column;
      }

      .tab-btn {
        width: 100%;
        text-align: center;
      }

      .benefits-grid {
        grid-template-columns: 1fr;
      }

      .legend {
        flex-direction: column;
        gap: 0.75rem;
      }
    }

    /* Chart Styles */
    .chart-container {
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      padding: 1.5rem;
      position: relative;
      height: 400px;
    }

    .chart-note {
      text-align: center;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 1rem;
      font-style: italic;
    }

    /* Sort selector for benchmarks */
    .sort-selector {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .sort-selector-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    .sort-selector-buttons {
      display: inline-flex;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
    }

    .sort-btn {
      background: transparent;
      border: none;
      padding: 0.3rem 0.75rem;
      font-family: inherit;
      font-size: 0.7rem;
      font-weight: 500;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.25s ease;
      position: relative;
    }

    .sort-btn:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0;
      top: 25%;
      height: 50%;
      width: 1px;
      background: var(--border-color);
    }

    .sort-btn:hover {
      color: var(--text-secondary);
      background: var(--bg-hover);
    }

    .sort-btn.active {
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.08);
    }

    .sort-btn.active:not(:last-child)::after {
      opacity: 0;
    }

    /* Toggle Switch - Inline version next to section titles */
    .section-title-wrapper {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .section-title-wrapper .section-title {
      margin-bottom: 0;
    }

    .toggle-inline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.35rem 0.75rem;
      background: var(--bg-card);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      white-space: nowrap;
    }

    .toggle-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    .toggle-switch {
      position: relative;
      width: 36px;
      height: 18px;
      background: var(--bg-hover);
      border-radius: 18px;
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .toggle-switch.active {
      background: var(--claude-bg);
      border-color: var(--claude-border);
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 12px;
      height: 12px;
      background: var(--text-muted);
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .toggle-switch.active::after {
      left: 20px;
      background: var(--claude-primary);
    }

    /* Coding toggle styling */
    .coding-toggle .toggle-switch.active {
      background: var(--rating-great);
      border-color: var(--rating-great-border);
    }

    .coding-toggle .toggle-switch.active::after {
      background: rgba(59, 130, 246, 0.8);
    }

    /* Instant models toggle styling */
    .instant-toggle .toggle-switch.active {
      background: rgba(199, 91, 245, 0.15);
      border-color: rgba(199, 91, 245, 0.3);
    }

    .instant-toggle .toggle-switch.active::after {
      background: rgba(199, 91, 245, 0.8);
    }

    /* ChatGPT Pro toggle styling (green like ChatGPT) */
    .chatgpt-pro-toggle .toggle-switch.active {
      background: rgba(16, 163, 127, 0.15);
      border-color: rgba(16, 163, 127, 0.3);
    }

    .chatgpt-pro-toggle .toggle-switch.active::after {
      background: rgba(16, 163, 127, 0.8);
    }

    /* Coding benchmarks visibility */
    .coding-benchmark-section {
      transition: opacity 0.3s ease, max-height 0.4s ease;
      overflow: hidden;
    }

    .hide-coding-benchmarks .coding-benchmark-section {
      opacity: 0;
      max-height: 0;
      margin: 0;
      padding: 0;
      pointer-events: none;
    }

    /* Annotation Tooltips */
    .annotation {
      cursor: help;
      color: var(--text-muted);
      font-size: 0.7em;
      vertical-align: super;
      position: relative;
      border-bottom: 1px dotted var(--text-muted);
      padding: 0 2px;
      transition: color 0.2s ease;
    }

    .annotation:hover {
      color: var(--text-primary);
    }

    .annotation::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-8px);
      background: rgba(18, 18, 26, 0.98);
      color: var(--text-primary);
      padding: 0.75rem 1rem;
      border-radius: 8px;
      font-size: 0.8rem;
      line-height: 1.5;
      white-space: normal;
      width: max-content;
      max-width: 300px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-color);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      z-index: 100;
      pointer-events: none;
      text-align: left;
      font-weight: normal;
      vertical-align: baseline;
    }

    .annotation:hover::after {
      opacity: 1;
      visibility: visible;
    }

    /* Flecha del tooltip */
    .annotation::before {
      content: '';
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(4px);
      border: 6px solid transparent;
      border-top-color: rgba(18, 18, 26, 0.98);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      z-index: 101;
    }

    .annotation:hover::before {
      opacity: 1;
      visibility: visible;
    }

    /* Tooltip positioning for last columns - prevent right edge cutoff */
    td:last-child .annotation::after,
    th:last-child .annotation::after {
      left: auto;
      right: 0;
      transform: translateY(-8px);
    }

    td:last-child .annotation::before,
    th:last-child .annotation::before {
      left: auto;
      right: 0px;
      transform: translateY(4px);
    }

    /* Price Tier Toggle */
    .price-tier-container {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .price-tier-toggle {
      display: flex;
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      padding: 0.35rem;
      gap: 0.25rem;
    }

    .price-tier-btn {
      background: transparent;
      border: none;
      padding: 0.75rem 1.25rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-secondary);
    }

    .price-tier-btn:hover {
      color: var(--text-primary);
      background: var(--bg-hover);
    }

    .price-tier-btn.active {
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Table visibility for tier switching */
    .tier-table {
      transition: opacity 0.3s ease, max-height 0.4s ease;
    }

    .tier-table.hidden {
      display: none;
    }

    .tier-table.fade-out {
      opacity: 0;
      transform: translateY(-8px);
    }

    .tier-table.fade-in {
      animation: tierFadeIn 0.15s ease-out forwards;
    }

    @keyframes tierFadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* High tier table column widths */
    #table-high-tier table {
      table-layout: fixed;
    }

    #table-high-tier th:first-child,
    #table-high-tier td:first-child {
      width: 273px;
    }

    #table-high-tier th:not(:first-child),
    #table-high-tier td:not(:first-child) {
      width: calc((100% - 273px) / 2);
    }

    /* Subjective Recommendations Toggle */
    .legend-toggle-wrapper {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
      width: 100%;
    }

    .legend-items {
      display: flex;
      flex-wrap: wrap;
      /* gap removed for animation support */
    }

    .subjective-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.35rem 0.75rem;
      background: var(--bg-card);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      white-space: nowrap;
      margin-left: auto;
    }

    .subjective-toggle .toggle-switch.active {
      background: var(--rating-great);
      border-color: var(--rating-great-border);
    }

    .subjective-toggle .toggle-switch.active::after {
      background: rgba(59, 130, 246, 0.8);
    }

    /* Hide subjective when toggle is off */
    .rating-great {
      transition: background 0.3s ease, border-left-color 0.3s ease;
    }

    .hide-subjective .rating-great {
      background: transparent;
      border-left-color: transparent;
    }

    .legend-subjective {
      transition: opacity 0.3s ease, max-width 0.4s ease, margin-right 0.4s ease;
      max-width: 300px;
      /* Sufficient width */
      overflow: hidden;
      white-space: nowrap;
    }

    .hide-subjective .legend-subjective {
      opacity: 0;
      pointer-events: none;
      max-width: 0;
      margin-right: 0;
    }

    /* USA-Exclusive Toggle */
    .toggle-container {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-left: auto;
    }

    .usa-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.35rem 0.75rem;
      background: var(--bg-card);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      white-space: nowrap;
    }

    .usa-toggle .toggle-switch.active {
      background: var(--rating-bad);
      border-color: var(--rating-bad-border);
    }

    .usa-toggle .toggle-switch.active::after {
      background: rgba(168, 85, 247, 0.8);
    }

    /* Hide USA-exclusive elements when toggle is off */
    .legend-usa {
      transition: opacity 0.3s ease;
    }

    .hide-usa-exclusive .legend-usa {
      opacity: 0;
      pointer-events: none;
    }

    .hide-usa-exclusive .usa-restricted {
      box-shadow: none;
      transition: box-shadow 0.3s ease;
    }

    .usa-restricted {
      transition: box-shadow 0.3s ease;
    }

    .rating-great.usa-restricted {
      transition: background 0.3s ease, border-left-color 0.3s ease, box-shadow 0.3s ease;
    }

    /* Hide USA-only inline content */
    .usa-only,
    .usa-main {
      display: inline-flex;
      opacity: 1;
      max-width: 500px;
      /* Large enough to fit content */
      white-space: nowrap;
      vertical-align: bottom;
      transition: opacity 0.3s ease 0.1s, max-width 0.5s ease;
    }

    .hide-usa-exclusive .usa-only,
    .hide-usa-exclusive .usa-main {
      opacity: 0;
      max-width: 0;
      margin: 0;
      pointer-events: none;
      overflow: hidden;
      transition: opacity 0.3s ease 0s, max-width 0.5s ease;
    }

    /* Animation specifically for advertisement rows */
    .usa-ad-row td {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 1;
    }

    .hide-usa-exclusive .usa-ad-row td {
      padding-top: 0;
      padding-bottom: 0;
      height: 0;
      line-height: 0;
      opacity: 0;
      border-bottom: 1px solid transparent;
      color: transparent;
      overflow: hidden;
    }

    /* Fade out content slightly faster than collapse */
    .hide-usa-exclusive .usa-ad-row td * {
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    /* Show alternate content when USA is hidden */
    .usa-alt {
      display: inline-flex;
      opacity: 0;
      max-width: 0;
      overflow: hidden;
      white-space: nowrap;
      vertical-align: bottom;
      transition: opacity 0.3s ease, max-width 0.5s ease;
      pointer-events: none;
    }

    .hide-usa-exclusive .usa-alt {
      opacity: 1;
      max-width: 500px;
      pointer-events: auto;
      overflow: visible;
    }

    /* Model Filters Panel */
    .model-filters-panel {
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      margin-bottom: 2rem;
      overflow: hidden;
    }

    .model-filters-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .model-filters-header:hover {
      background: var(--bg-hover);
    }

    .model-filters-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .model-filters-toggle {
      font-size: 0.7rem;
      color: var(--text-muted);
      transition: transform 0.3s ease;
    }

    .model-filters-panel.expanded .model-filters-toggle {
      transform: rotate(180deg);
    }

    .model-filters-content {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
      padding: 0 1.5rem;
    }

    .model-filters-panel.expanded .model-filters-content {
      max-height: 1000px;
      opacity: 1;
      padding: 0 1.5rem 1.5rem;
    }

    .filter-group {
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-light);
    }

    .filter-group:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .filter-group-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .filter-group-name {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-secondary);
    }

    .model-dots-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding-left: 0.25rem;
    }

    .model-dot {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.3rem 0.6rem;
      border-radius: 12px;
      background: var(--bg-hover);
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }

    .model-dot:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .model-dot.inactive {
      opacity: 0.4;
    }

    .model-dot.inactive:hover {
      opacity: 0.6;
    }

    .model-dot-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .model-dot-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      white-space: nowrap;
    }

    /* Brand colors for dots */
    .dot-gpt {
      background: var(--chatgpt-primary);
    }

    .dot-gemini {
      background: var(--gemini-primary);
    }

    .dot-claude {
      background: var(--claude-primary);
    }

    /* Blue dot for coding benchmarks */
    .dot-coding {
      background: rgba(59, 130, 246, 0.9);
    }

    /* Thinking models toggle styling */
    .reasoning-toggle .toggle-switch.active {
      background: rgba(139, 92, 246, 0.15);
      border-color: rgba(139, 92, 246, 0.3);
    }

    .reasoning-toggle .toggle-switch.active::after {
      background: rgba(139, 92, 246, 0.8);
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1 class="title"><span
          style="color: var(--chatgpt-primary); -webkit-text-fill-color: var(--chatgpt-primary);">ChatGPT</span> vs
        <span style="color: var(--gemini-primary); -webkit-text-fill-color: var(--gemini-primary);">Gemini</span>
      </h1>
      <p class="subtitle">A detailed comparison of AI assistant subscriptions and performance</p>
    </header>

    <!-- Price Tier Toggle -->
    <div class="price-tier-container">
      <div class="price-tier-toggle">
        <button onclick="switchPriceTier('free')" id="btn-tier-free" class="price-tier-btn">$0 plans</button>
        <button onclick="switchPriceTier('low')" id="btn-tier-low" class="price-tier-btn active">$0-$20 plans</button>
        <button onclick="switchPriceTier('high')" id="btn-tier-high" class="price-tier-btn">$200-$250 plans</button>
      </div>
    </div>

    <!-- Tabs Navigation -->
    <nav class="tabs-nav">
      <button onclick="switchTab('specs')" id="btn-specs" class="tab-btn active">Subscription Plans</button>
      <button onclick="switchTab('benchmarks')" id="btn-benchmarks" class="tab-btn">Benchmarks</button>
      <button onclick="switchTab('benefits')" id="btn-benefits" class="tab-btn">Extra Benefits</button>
    </nav>

    <!-- TAB 1: SPECS -->
    <section id="tab-specs" class="tab-content active">

      <!-- Free Plans Table -->
      <div class="table-wrapper tier-table hidden" id="table-free-tier">
        <table>
          <thead>
            <tr>
              <th rowspan="2" style="border-bottom: 2px solid var(--border-color);">Feature</th>
              <th class="th-chatgpt">ChatGPT</th>
              <th class="th-gemini">Gemini</th>
            </tr>
            <tr>
              <th class="th-chatgpt" style="text-align: center;">Free</th>
              <th class="th-gemini" style="text-align: center;">Free</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Reasoning model limit per day</td>
              <td>1<span class="detail">[GPT 5 Thinking Mini]<span class="annotation"
                    data-note="gpt5-mini-free"></span></span>
              </td>
              <td class="rating-excellent">3+9<span class="detail">[Gemini 3 Pro + Gemini 3 Flash Thinking]</span></td>
            </tr>
            <tr>
              <td>Non-reasoning model limit per day</td>
              <td>40<span class="detail">(10 every 5h)</span><span class="detail">[GPT 5.2 Instant]</span></td>
              <td class="rating-excellent">Unlimited<span class="detail">[Gemini 3 Flash]</span></td>
            </tr>
            <tr>
              <td>Context window limit</td>
              <td>16k / 196k<span class="detail">(Non-reasoning / Reasoning)</span></td>
              <td class="rating-excellent">32k</td>
            </tr>
            <tr>
              <td>File uploads per day</td>
              <td>3</td>
              <td>Unknown</td>
            </tr>
            <tr>
              <td>Memory features</td>
              <td>Memories</td>
              <td class="rating-excellent">Memories<span class="annotation" data-note="gemini-memory">
                </span>, chat history
              </td>
            </tr>
            <tr>
              <td>Image generation per day</td>
              <td>5<span class="annotation" data-note="user-reports"></span><span class="detail">[GPT Image 1.5]</span>
              </td>
              <td class="rating-excellent">3+100<span class="detail">[Nano Banana Pro + Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Image resolution (1:1)</td>
              <td>1024×1024 (1K)<span class="detail">[GPT Image 1.5]</span></td>
              <td class="rating-excellent">2048×2048 (2K) / 1024×1024 (1K)<span class="detail">
                  [Nano Banana Pro / Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Custom model creation</td>
              <td>No<span class="detail">[Custom GPTs]</span></td>
              <td class="rating-excellent">Yes<span class="detail">[Gems]</span></td>
            </tr>
            <tr>
              <td>Folder organization</td>
              <td class="rating-excellent">Yes<span class="detail">[Projects]</span></td>
              <td>No<span class="annotation" data-note="notebooklm"></span>
              </td>
            </tr>
            <tr>
              <td>Maximum scheduled tasks</td>
              <td class="rating-excellent">10<br><span class="detail">[Tasks]</span></td>
              <td>No</td>
            </tr>
            <tr>
              <td>Deep research uses per month</td>
              <td class="rating-excellent">5<span class="detail">[GPT 5.2 Thinking]</span>
              </td>
              <td class="rating-excellent">5<span class="detail">[Gemini 3 Flash Thinking]</span></td>
            </tr>

            <tr class="usa-ad-row">
              <td>Advertisements</td>
              <td class="usa-restricted">Yes<span class="annotation" data-note="usa-only"></span>
              </td>
              <td class="rating-excellent">No</td>
            </tr>
            <tr>
              <td>Video processing per day</td>
              <td>No</td>
              <td class="rating-excellent">3<span class="detail">(Up to 5 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Audio processing per day</td>
              <td>No</td>
              <td class="rating-excellent">3<span class="detail">(Up to 10 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Youtube summaries</td>
              <td>No</td>
              <td class="rating-excellent">Yes</td>
            </tr>
            <tr>
              <td>Cloud storage included</td>
              <td>No</td>
              <td class="rating-excellent">15GB<span class="annotation" data-note="free-15gb"></span></td>
            </tr>
            <tr>
              <td>Age estimation and verification method</td>
              <td>AI-based<span class="annotation" data-note="age-ai"></span><span class="detail">Verification only with
                  ID, through a
                  third-party
                  (Persona Identities)<span class="annotation" data-note="age-verification"></span></span>
              </td>
              <td class="rating-great">Birth date based (prioritized), AI-based<span class="annotation"
                  data-note="age-ai"></span><span class="detail">Verification with ID or
                  credit card, sent
                  directly to Google<span class="annotation" data-note="age-verification"></span></span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- 0-20 USD Table -->
      <div class="table-wrapper tier-table" id="table-low-tier">
        <table>
          <thead>
            <tr>
              <th rowspan="2" style="border-bottom: 2px solid var(--border-color);">Feature</th>
              <th colspan="3" class="th-chatgpt">ChatGPT</th>
              <th colspan="3" class="th-gemini">Gemini</th>
            </tr>
            <tr>
              <th class="th-chatgpt" style="text-align: center;">Free</th>
              <th class="th-chatgpt" style="text-align: center;">Go</th>
              <th class="th-chatgpt" style="text-align: center;">Plus</th>
              <th class="th-gemini" style="text-align: center;">Free</th>
              <th class="th-gemini" style="text-align: center;">Plus</th>
              <th class="th-gemini" style="text-align: center;">Pro</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Reasoning model limit per day</td>
              <td>1<span class="detail">[GPT 5 Thinking Mini]<span class="annotation"
                    data-note="gpt5-mini-free"></span></span>
              </td>
              <td>10<span class="detail">[GPT 5 Thinking Mini]<span class="annotation"
                    data-note="gpt5-mini-free"></span></span>
              </td>
              <td class="rating-excellent">428<span class="detail">(3000/week)<span class="detail">[GPT 5.2
                    Thinking]</span></td>
              <td>3+9<span class="detail">[Gemini 3 Pro + Gemini 3 Flash Thinking]</span></td>
              <td class="rating-great">30+90<span class="detail">[Gemini 3 Pro + Gemini 3 Flash Thinking]</span></td>
              <td class="rating-great">100+300<span class="detail">[Gemini 3 Pro + Gemini 3 Flash Thinking]</span></td>
            </tr>
            <tr>
              <td>Non-reasoning model limit per day</td>
              <td>40<span class="detail">(10 every 5h)<span class="detail">[GPT 5.2 Instant]</span></td>
              <td colspan="2" class="rating-excellent">Unlimited<span class="detail">[GPT 5.2 Instant]</span></td>
              <td colspan="3" class="rating-excellent">Unlimited<span class="detail">[Gemini 3 Flash]</span></td>
            </tr>
            <tr>
              <td>Context window limit</td>
              <td>16k / 196k<span class="detail">(Non-reasoning / Reasoning)</span></td>
              <td colspan="2" class="rating-great">32k / 196k<span class="detail">(Non-reasoning / Reasoning)</span>
              </td>
              <td>32k</td>
              <td class="rating-great">128k</td>
              <td class="rating-excellent">1M<span class="annotation" data-note="1m-tokens"></span></td>
            </tr>
            <tr>
              <td>File uploads per day</td>
              <td>3</td>
              <td class="rating-great">30</td>
              <td class="rating-excellent">640<span class="detail">(80 every 3h)</span></td>
              <td colspan="3">Unknown</td>
            </tr>
            <tr>
              <td>Memory features</td>
              <td colspan="2">Memories</td>
              <td id="memory-chatgpt-plus" class="rating-great">Memories, chat history, chat search</td>
              <td colspan="2">Memories<span class="annotation" data-note="gemini-memory">
                </span>, chat history
              </td>
              <td id="memory-gemini-pro" class="rating-great usa-restricted">Memories<span class="annotation"
                  data-note="gemini-memory"></span>, chat history<span class="usa-only">ecosystem memory<span
                    class="annotation" data-note="ecosystem-memory"></span><span class="annotation"
                    data-note="usa-only"></span></span>
              </td>
            </tr>
            <tr>
              <td>Image generation per day</td>
              <td>5<span class="annotation" data-note="user-reports"></span><span class="detail">[GPT Image 1.5]</span>
              </td>
              <td>>5?<span class="annotation" data-note="gpt-image-unknown"></span><span class="detail">[GPT Image
                  1.5]</span></td>
              <td>50?<span class="annotation" data-note="gpt-image-unknown"></span><span class="detail">[GPT Image
                  1.5]</span></td>
              <td class="rating-excellent">3+100<span class="detail">[Nano Banana Pro + Nano Banana]</span></td>
              <td class="rating-great">50+1000<span class="detail">[Nano Banana Pro<span class="annotation"
                    data-note="nano-banana-pro-throttle"></span> + Nano Banana]</span></td>
              <td class="rating-excellent">100+1000<span class="detail">[Nano Banana Pro<span class="annotation"
                    data-note="nano-banana-pro-throttle"></span> + Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Image resolution (1:1)</td>
              <td colspan="3">1024×1024 (1K)<span class="detail">[GPT Image 1.5]</span></td>
              <td colspan="3" class="rating-excellent">2048×2048 (2K) / 1024×1024 (1K)<span class="detail">[Nano Banana
                  Pro<span class="annotation" data-note="nano-banana-pro-throttle"></span> /
                  Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Custom model creation</td>
              <td>No<span class="detail">[Custom GPTs]</span></td>
              <td colspan="2" class="rating-excellent">Yes<span class="detail">[Custom GPTs]</span></td>
              <td colspan="3" class="rating-excellent">Yes<span class="detail">[Gems]</span></td>
            </tr>
            <tr>
              <td>Folder organization</td>
              <td colspan="3" class="rating-excellent">Yes<span class="detail">[Projects]</span></td>
              <td colspan="3">No<span class="annotation" data-note="notebooklm"></span>
              </td>
            </tr>
            <tr>
              <td>Maximum scheduled tasks</td>
              <td colspan="3" class="rating-excellent">10<br><span class="detail">[Tasks]</span></td>
              <td>No</td>
              <td colspan="2" class="rating-excellent">10<br><span class="detail">[Scheduled Actions]</span></td>
            </tr>
            <tr>
              <td>Deep research uses per month</td>
              <td>5<span class="detail">[GPT 5.2 Thinking]</span>
              </td>
              <td>5<span class="annotation" data-note="user-reports"></span><span class="detail">[GPT 5.2
                  Thinking]</span>
              </td>
              <td>25<span class="detail">[GPT 5.2 Thinking]</span>
              </td>
              <td>5<span class="detail">[Gemini 3 Flash Thinking]</span></td>
              <td class="rating-great">90<span class="detail">(3/day)<span class="detail">[Gemini 3 Pro]</span></td>
              <td class="rating-excellent">600<span class="detail">(20/day)<span class="detail">[Gemini 3 Pro]</span>
              </td>
            </tr>
            <tr>
              <td>Agent mode uses per month</td>
              <td colspan="2">No</td>
              <td class="rating-excellent">40</td>
              <td colspan="3">No</td>
            </tr>

            <tr class="usa-ad-row">
              <td>Advertisements</td>
              <td colspan="2" class="usa-restricted">Yes<span class="annotation" data-note="usa-only"></span>
              </td>
              <td class="rating-excellent separator">No</td>
              <td colspan="3" class="rating-excellent">No</td>
            </tr>
            <tr>
              <td>Video processing per day</td>
              <td colspan="3" class="separator">No</td>
              <td>3<span class="detail">(Up to 5 minutes per file)</span></td>
              <td>6<span class="detail">(Up to 5 minutes per file)</span></td>
              <td class="rating-excellent separator">20<span class="detail">(Up to 60 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Audio processing per day</td>
              <td colspan="3" class="separator">No</td>
              <td>3<span class="detail">(Up to 10 minutes per file)</span></td>
              <td>6<span class="detail">(Up to 10 minutes per file)</span></td>
              <td class="rating-excellent separator">20<span class="detail">(Up to 180 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Youtube summaries</td>
              <td colspan="3" class="separator">No</td>
              <td colspan="3" class="rating-excellent">Yes</td>
            </tr>
            <tr>
              <td>Cloud storage included</td>
              <td colspan="3" class="separator">No</td>
              <td>15GB<span class="annotation" data-note="free-15gb"></span></td>
              <td class="rating-great">200GB</td>
              <td class="rating-excellent">2TB</td>
            </tr>
            <tr>
              <td>API credit included</td>
              <td colspan="3">No</td>
              <td colspan="2">No</td>
              <td class="rating-excellent">$10/month<span class="detail">(Unused credit expires monthly)</span></td>
            </tr>
            <tr>
              <td>Plan sharing</td>
              <td colspan="3" class="separator">No</td>
              <td>No</td>
              <td colspan="2" class="rating-excellent">Up to 6 accounts</td>
            </tr>
            <tr>
              <td>Age estimation and verification method</td>
              <td colspan="3" class="separator">AI-based<span class="annotation" data-note="age-ai"></span><span
                  class="detail">Verification only with ID, through a
                  third-party
                  (Persona Identities)<span class="annotation" data-note="age-verification"></span></span>
              </td>
              <td colspan="3" class="rating-great">Birth date based (prioritized), AI-based<span class="annotation"
                  data-note="age-ai"></span><span class="detail">Verification with ID or
                  credit card, sent
                  directly to Google<span class="annotation" data-note="age-verification"></span></span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- +100 USD Table -->
      <div class="table-wrapper tier-table hidden" id="table-high-tier">
        <table>
          <thead>
            <tr>
              <th rowspan="2" style="border-bottom: 2px solid var(--border-color);">Feature</th>
              <th class="th-chatgpt">ChatGPT</th>
              <th class="th-gemini">Gemini</th>
            </tr>
            <tr>
              <th class="th-chatgpt" style="text-align: center;">Pro</th>
              <th class="th-gemini" style="text-align: center;">Ultra</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Reasoning model limit per day</td>
              <td class="rating-excellent">Unlimited<span class="detail">[ChatGPT 5.2 Pro + ChatGPT 5.2 Thinking]</span>
              </td>
              <td class="rating-great usa-restricted"><span class="usa-main"><span class="usa-only"></span>10<span
                    class="annotation" data-note="usa-only"></span>+</span>500+1500<span class="detail">[<span
                    class="usa-only">Gemini 3 Deep
                    Think<span class="annotation" data-note="usa-only"></span> +
                  </span>Gemini 3 Pro + Gemini 3 Flash Thinking]</td>
            </tr>
            <tr>
              <td>Non-reasoning model limit per day</td>
              <td class="rating-excellent">Unlimited<span class="detail">[ChatGPT 5.2 Instant]</span></td>
              <td class="rating-excellent">Unlimited<span class="detail">[Gemini 3 Flash]</span></td>
            </tr>
            <tr>
              <td>Context window limit</td>
              <td class="rating-great">128k / 196k<span class="detail">(Non-reasoning / Reasoning)</span></td>
              <td class="rating-excellent usa-restricted"><span class="usa-main"><span class="usa-only">192k<span
                      class="annotation" data-note="usa-only"></span> / </span></span> 1M<span class="annotation"
                  data-note="1m-tokens"></span><span class="detail"><span class="usa-only">(Gemini 3 Deep Think<span
                      class="annotation" data-note="usa-only"></span> / Other models)</span></span>
              </td>
            </tr>
            <tr>
              <td>File uploads per day</td>
              <td class="rating-excellent">Unlimited</td>
              <td>Unknown</td>
            </tr>
            <tr>
              <td>Memory features</td>
              <td id="memory-chatgpt-pro" class="rating-great">Memories, chat history, chat search, proactive
                research<span class="annotation" data-note="chatgpt-pulse"></span>
              </td>
              <td id="memory-gemini-ultra" class="rating-great usa-restricted">Memories<span class="annotation"
                  data-note="gemini-memory"></span>, chat history<span class="usa-only">, ecosystem memory<span
                    class="annotation" data-note="ecosystem-memory"></span><span class="annotation"
                    data-note="usa-only"></span></span>
              </td>
            </tr>
            <tr>
              <td>Image generation per day</td>
              <td class="rating-excellent">Unlimited<span class="detail">[GPT Image 1.5]</span></td>
              <td class="rating-great">1000+1000<span class="detail">[Nano Banana Pro<span class="annotation"
                    data-note="nano-banana-pro-throttle"></span> + Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Image resolution (1:1)</td>
              <td>1024×1024 (1K)<span class="detail">[GPT Image 1.5]</span></td>
              <td class="rating-excellent">2048×2048 (2K) / 1024×1024 (1K)<span class="detail">[Nano Banana
                  Pro<span class="annotation" data-note="nano-banana-pro-throttle"></span> /
                  Nano Banana]</span></td>
            </tr>
            <tr>
              <td>Custom model creation</td>
              <td class="rating-excellent">Yes<span class="detail">[Custom GPTs]</span></td>
              <td class="rating-excellent">Yes<span class="detail">[Gems]</span></td>
            </tr>
            <tr>
              <td>Folder organization</td>
              <td class="rating-excellent">Yes<span class="detail">[Projects]</span></td>
              <td>No<span class="annotation" data-note="notebooklm"></span>
              </td>
            </tr>
            <tr>
              <td>Maximum scheduled tasks</td>
              <td class="rating-excellent">10<br><span class="detail">[Tasks]</span></td>
              <td class="rating-excellent">10<br><span class="detail">[Scheduled Actions]</span></td>
            </tr>
            <tr>
              <td>Deep research uses per month</td>
              <td class="rating-great">250<span class="detail">[GPT 5.2 Thinking]</span>
              </td>
              <td class="rating-excellent">6000<span class="detail">(200/day)</span><span class="detail">[Gemini 3
                  Pro]</span></td>
            </tr>
            <tr>
              <td>Agent mode uses per month</td>
              <td id="agent-chatgpt-pro" class="rating-great">400</td>
              <td id="agent-gemini-ultra" class="rating-excellent usa-restricted">
                <span class="usa-main">6000<span class="annotation" data-note="usa-only"></span></span><span
                  class="usa-alt">No</span>
                <span class="detail"><span class="usa-only">(200/day)</span></span>
              </td>
            </tr>

            <tr class="usa-ad-row">
              <td>Advertisements</td>
              <td class="rating-excellent">No</td>
              <td class="rating-excellent">No</td>
            </tr>
            <tr>
              <td>Video processing per day</td>
              <td class="separator">No</td>
              <td class="rating-excellent separator">20<span class="detail">(Up to 60 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Audio processing per day</td>
              <td class="separator">No</td>
              <td class="rating-excellent separator">20<span class="detail">(Up to 180 minutes per file)</span></td>
            </tr>
            <tr>
              <td>Youtube summaries</td>
              <td class="separator">No</td>
              <td class="rating-excellent">Yes</td>
            </tr>
            <tr>
              <td>Cloud storage included</td>
              <td class="separator">No</td>
              <td class="rating-excellent">30TB</td>
            </tr>
            <tr>
              <td>API credit included</td>
              <td>No</td>
              <td class="rating-excellent">$100/month<span class="detail">(Unused credit expires monthly)</span></td>
            </tr>
            <tr>
              <td>Plan sharing</td>
              <td>No</td>
              <td class="rating-excellent">Up to 6 accounts</td>
            </tr>
            <tr>
              <td>Age estimation and verification method</td>
              <td>AI-based<span class="annotation" data-note="age-ai"></span><span class="detail">Verification only with
                  ID, through a
                  third-party
                  (Persona Identities)<span class="annotation" data-note="age-verification"></span></span>
              </td>
              <td class="rating-great">Birth date based (prioritized), AI-based<span class="annotation"
                  data-note="age-ai"></span><span class="detail">Verification with ID or
                  credit card, sent
                  directly to Google<span class="annotation" data-note="age-verification"></span></span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Legend -->
      <div class="legend">
        <div class="legend-toggle-wrapper">
          <div class="legend-items">
            <div class="legend-item"><span class="legend-color legend-excellent"></span> Best option</div>
            <div class="legend-item legend-subjective"><span class="legend-color legend-great"></span> Sufficient option
              (subjectively)</div>
            <div class="legend-item legend-usa"><span class="legend-color legend-usa-restricted"></span> Includes
              USA-exclusive
              features
            </div>
          </div>
          <div class="toggle-container">
            <div class="usa-toggle">
              <span class="toggle-label">USA-exclusive features</span>
              <div class="toggle-switch active" onclick="toggleUSAExclusive()"></div>
            </div>
            <div class="subjective-toggle">
              <span class="toggle-label">Subjective recommendations</span>
              <div class="toggle-switch active" onclick="toggleSubjective()"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="notes">
        <p class="notes-title">Footnotes</p>
        <ul class="notes-list" id="footnotes-list">
          <!-- Auto-generated by initAnnotations() -->
        </ul>
      </div>
    </section>

    <!-- TAB 2: BENCHMARKS -->
    <!-- TAB 2: BENCHMARKS -->
    <section id="tab-benchmarks" class="tab-content hide-coding-benchmarks">

      <!-- Model Filters Panel -->
      <div class="model-filters-panel" id="modelFiltersPanel">
        <div class="model-filters-header" onclick="toggleFiltersPanel()">
          <span class="model-filters-title">Model Filters + Extra Benchmarks</span>
          <span class="model-filters-toggle">▼</span>
        </div>
        <div class="model-filters-content">
          <!-- Claude models -->
          <div class="filter-group">
            <div class="filter-group-header">
              <span class="filter-group-name">Claude models</span>
              <div class="toggle-switch claude-toggle active" onclick="event.stopPropagation(); toggleClaudeModels()">
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot inactive" data-model="claude-46-opus"
                onclick="toggleIndividualModel('claude-46-opus')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.6 Opus Extended</span>
              </div>
              <div class="model-dot inactive" data-model="claude-46-opus-nr"
                onclick="toggleIndividualModel('claude-46-opus-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.6 Opus</span>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="claude-opus" onclick="toggleIndividualModel('claude-opus')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Opus Extended</span>
              </div>
              <div class="model-dot" data-model="claude-sonnet" onclick="toggleIndividualModel('claude-sonnet')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Sonnet Extended</span>
              </div>
              <div class="model-dot inactive" data-model="claude-haiku" onclick="toggleIndividualModel('claude-haiku')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Haiku Extended</span>
              </div>
            </div>
            <div class="model-dots-row">
              <div class="model-dot inactive" data-model="claude-opus-nr"
                onclick="toggleIndividualModel('claude-opus-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Opus</span>
              </div>
              <div class="model-dot inactive" data-model="claude-sonnet-nr"
                onclick="toggleIndividualModel('claude-sonnet-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Sonnet</span>
              </div>
              <div class="model-dot inactive" data-model="claude-haiku-nr"
                onclick="toggleIndividualModel('claude-haiku-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Haiku</span>
              </div>
            </div>
          </div>

          <!-- Reasoning models -->
          <div class="filter-group">
            <div class="filter-group-header">
              <span class="filter-group-name">Reasoning models</span>
              <div class="toggle-inline reasoning-toggle">
                <div class="toggle-switch reasoning-model-toggle active"
                  onclick="event.stopPropagation(); toggleReasoningModels()"></div>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="gpt-codex" onclick="toggleIndividualModel('gpt-codex')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Codex</span>
              </div>
              <div class="model-dot" data-model="gpt-xhigh" onclick="toggleIndividualModel('gpt-xhigh')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Thinking xhigh</span>
              </div>
              <div class="model-dot" data-model="gpt-thinking" onclick="toggleIndividualModel('gpt-thinking')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Thinking</span>
              </div>
              <div class="model-dot" data-model="gpt-thinking-mini"
                onclick="toggleIndividualModel('gpt-thinking-mini')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5 Thinking Mini</span>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="gemini-pro" onclick="toggleIndividualModel('gemini-pro')">
                <span class="model-dot-indicator dot-gemini"></span>
                <span class="model-dot-label">Gemini 3 Pro</span>
              </div>
              <div class="model-dot" data-model="gemini-flash-thinking"
                onclick="toggleIndividualModel('gemini-flash-thinking')">
                <span class="model-dot-indicator dot-gemini"></span>
                <span class="model-dot-label">Gemini 3 Flash Thinking</span>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot inactive" data-model="claude-46-opus"
                onclick="toggleIndividualModel('claude-46-opus')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.6 Opus Extended</span>
              </div>
            </div>
            <div class="model-dots-row">
              <div class="model-dot" data-model="claude-opus" onclick="toggleIndividualModel('claude-opus')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Opus Extended</span>
              </div>
              <div class="model-dot" data-model="claude-sonnet" onclick="toggleIndividualModel('claude-sonnet')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Sonnet Extended</span>
              </div>
              <div class="model-dot" data-model="claude-haiku" onclick="toggleIndividualModel('claude-haiku')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Haiku Extended</span>
              </div>
            </div>
          </div>

          <!-- Non-reasoning models -->
          <div class="filter-group">
            <div class="filter-group-header">
              <span class="filter-group-name">Non-reasoning models</span>
              <div class="toggle-inline instant-toggle">
                <div class="toggle-switch instant-model-toggle active"
                  onclick="event.stopPropagation(); toggleInstantModels()"></div>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="gpt-instant" onclick="toggleIndividualModel('gpt-instant')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Instant</span>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="gemini-flash" onclick="toggleIndividualModel('gemini-flash')">
                <span class="model-dot-indicator dot-gemini"></span>
                <span class="model-dot-label">Gemini 3 Flash</span>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot inactive" data-model="claude-46-opus-nr"
                onclick="toggleIndividualModel('claude-46-opus-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.6 Opus</span>
              </div>
            </div>
            <div class="model-dots-row">
              <div class="model-dot inactive" data-model="claude-opus-nr"
                onclick="toggleIndividualModel('claude-opus-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Opus</span>
              </div>
              <div class="model-dot inactive" data-model="claude-sonnet-nr"
                onclick="toggleIndividualModel('claude-sonnet-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Sonnet</span>
              </div>
              <div class="model-dot inactive" data-model="claude-haiku-nr"
                onclick="toggleIndividualModel('claude-haiku-nr')">
                <span class="model-dot-indicator dot-claude"></span>
                <span class="model-dot-label">Claude 4.5 Haiku</span>
              </div>
            </div>
          </div>

          <!-- ChatGPT Pro-only models -->
          <div class="filter-group">
            <div class="filter-group-header">
              <span class="filter-group-name">ChatGPT Pro-only models</span>
              <div class="toggle-inline chatgpt-pro-toggle">
                <div class="toggle-switch chatgpt-pro-model-toggle"
                  onclick="event.stopPropagation(); toggleChatGPTProModels()"></div>
              </div>
            </div>
            <div class="model-dots-row">
              <div class="model-dot" data-model="gpt-xhigh" onclick="toggleIndividualModel('gpt-xhigh')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Thinking xhigh</span>
              </div>
            </div>
          </div>

          <!-- Coding benchmarks and models -->
          <div class="filter-group">
            <div class="filter-group-header">
              <span class="filter-group-name">Coding benchmarks and models</span>
              <div class="toggle-inline coding-toggle">
                <div class="toggle-switch coding-bench-toggle"
                  onclick="event.stopPropagation(); toggleCodingBenchmarks()"></div>
              </div>
            </div>
            <div class="model-dots-row" style="margin-bottom: 0.5rem;">
              <div class="model-dot" data-model="coding-benchmarks" onclick="toggleCodingSection()">
                <span class="model-dot-indicator dot-coding"></span>
                <span class="model-dot-label">Coding benchmarks</span>
              </div>
            </div>
            <div class="model-dots-row">
              <div class="model-dot" data-model="gpt-codex" onclick="toggleIndividualModel('gpt-codex')">
                <span class="model-dot-indicator dot-gpt"></span>
                <span class="model-dot-label">GPT 5.2 Codex</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AA-Omniscience -->
      <div class="section-title-wrapper">
        <h2 class="section-title">Knowledge Accuracy — AA-Omniscience Benchmark</h2>
        <div class="toggle-inline">
          <span class="toggle-label">Claude models</span>
          <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
        </div>
        <div class="toggle-inline reasoning-toggle">
          <span class="toggle-label">Reasoning models</span>
          <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
        </div>
        <div class="toggle-inline instant-toggle">
          <span class="toggle-label">Non-reasoning models</span>
          <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
        </div>
        <div class="toggle-inline chatgpt-pro-toggle">
          <span class="toggle-label">ChatGPT Pro-only models</span>
          <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="omniscienceChart"></canvas>
      </div>
      <p class="chart-note">Shows how often the model is right or wrong when answering. Higher is better for Correct &
        Abstention. Lower is better for Hallucination.</p>
      <div class="sort-selector">
        <span class="sort-selector-label"><strong>Sort by</strong></span>
        <div class="sort-selector-buttons">
          <button class="sort-btn active" onclick="setOmniscienceSort('brand')" id="omniscienceSortBrand">✦
            Brand</button>
          <button class="sort-btn" onclick="setOmniscienceSort('hallucination')" id="omniscienceSortHallucination">↓
            Hallucination</button>
          <button class="sort-btn" onclick="setOmniscienceSort('correct')" id="omniscienceSortCorrect">↑
            Correct</button>
        </div>
      </div>

      <!-- Notes for first chart -->
      <div class="notes collapsible expanded" style="margin-top: 1rem;">
        <div class="notes-header" onclick="toggleNotes(this)">
          <p class="notes-title">AA-Omniscience Notes</p>
          <span class="notes-toggle">▼</span>
        </div>
        <div class="notes-content">
          <ul class="notes-list">
            <li>• <strong>Correct</strong> answers were calculated with <em>Correct = A</em>.</li>
            <li>• <strong>Abstention</strong> answers were calculated with <em>Abstention = (1−A)⋅(1−H)</em>.</li>
            <li>• <strong>Hallucination</strong> answers were calculated with <em>Hallucination = (1−A)⋅H</em>.</li>
            <li>• <em>(Where "A" is the percentage scored on the "AA-Omnisicence Accuracy" benchmark, "H" is the
                percentage scored on
                the "AA-Omnisicence Hallucination Rate" benchmark.)</em></li>
          </ul>
        </div>
      </div>

      <!-- MRCR v2 -->
      <div class="section-title-wrapper" style="margin-top: 3rem;">
        <h2 class="section-title">Long Context Accuracy — MRCR v2 8-Needle Benchmark</h2>
        <div class="toggle-inline">
          <span class="toggle-label">Claude models</span>
          <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
        </div>
        <div class="toggle-inline reasoning-toggle">
          <span class="toggle-label">Reasoning models</span>
          <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
        </div>
        <div class="toggle-inline instant-toggle">
          <span class="toggle-label">Non-reasoning models</span>
          <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
        </div>
        <div class="toggle-inline chatgpt-pro-toggle">
          <span class="toggle-label">ChatGPT Pro-only models</span>
          <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="mrcrChart"></canvas>
      </div>
      <p class="chart-note">Shows how accuracy at locating specific details in context degrades as context length
        increases. Ranges from 8k to 1048k (1M) tokens. Higher is better.</p>

      <!-- Notes for second chart -->
      <div class="notes collapsible expanded" style="margin-top: 1rem;">
        <div class="notes-header" onclick="toggleNotes(this)">
          <p class="notes-title">MRCR v2 8-Needle Notes</p>
          <span class="notes-toggle">▼</span>
        </div>
        <div class="notes-content">
          <ul class="notes-list">
            <li>• Differs greatly from the next benchmark. While AA-LCR revolves around comprehending really long
              texts, MRCR v2 8-Needle evaluates the model capability to find specific information in those texts.</li>
            <li>• There's no benchmark for 196k tokens, the next available one is 256k, which is not supported
              by ChatGPT on the web and app.</li>
            <li>• This benchmark currently does not provide support for GPT-5.2 Codex and non-reasoning Claude models.
            </li>
            <li>• This benchmark has not yet published the full results for the Claude Opus 4.6 models.
              It is only known that Claude Opus 4.6 Extended performs with an accuracy of >93% on 128k tokens.
              The remaining values were estimated by assuming a roughly linear trend on a log2 context-length scale
            </li>
            <li>• Maximum context window of <strong>GPT 5.2 Thinking and GPT 5.2 Thinking xhigh</strong> is 196k tokens.
            </li>
            <li>• Maximum context window of <strong>GPT 5.2 Instant</strong> is 16k/32k/128k tokens (Free/Plus &
              Go/Pro).</li>
            <li>• Maximum context window of all <strong>Gemini</strong> models is
              32k/128k/1M tokens (Free/Plus/Pro & Ultra).</li>
            <li>• Maximum context window of all <strong>Claude</strong> models is 200k tokens.</li>
            <li>• 1M tokens equals 1048k tokens.</li>
          </ul>
        </div>
      </div>

      <!-- Long Context Reasoning - AA-LCR -->
      <div class="section-title-wrapper" style="margin-top: 3rem;">
        <h2 class="section-title">Long Context Reasoning — AA-LCR</h2>
        <div class="toggle-inline">
          <span class="toggle-label">Claude models</span>
          <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
        </div>
        <div class="toggle-inline reasoning-toggle">
          <span class="toggle-label">Reasoning models</span>
          <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
        </div>
        <div class="toggle-inline instant-toggle">
          <span class="toggle-label">Non-reasoning models</span>
          <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
        </div>
        <div class="toggle-inline chatgpt-pro-toggle">
          <span class="toggle-label">ChatGPT Pro-only models</span>
          <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="lcrChart"></canvas>
      </div>
      <p class="chart-note">Shows extraction, comprehension and synthesizing of information on texts ranging from 10k to
        100k tokens. Higher is better.</p>

      <!-- Notes for LCR chart -->
      <div class="notes collapsible expanded" style="margin-top: 1rem;">
        <div class="notes-header" onclick="toggleNotes(this)">
          <p class="notes-title">AA-LCR Notes</p>
          <span class="notes-toggle">▼</span>
        </div>
        <div class="notes-content">
          <ul class="notes-list">
            <li>• Differs greatly from the next benchmark. While AA-LCR revolves around comprehending really long
              texts, MRCR v2 8-Needle evaluates the model capability to find specific information in those texts.</li>
            <li>• There's no benchmark for 196k tokens, the next available one is 256k, which is not supported
              by ChatGPT on the web and app.</li>
            <li>• Maximum context window of <strong>GPT 5.2 Thinking and GPT 5.2 Thinking xhigh</strong> is 196k tokens.
            </li>
            <li>• Maximum context window of <strong>GPT 5.2 Instant</strong> is 16k/32k/128k tokens (Free/Plus &
              Go/Pro).</li>
            <li>• Maximum context window of all <strong>Gemini</strong> models is
              32k/128k/1M tokens (Free/Plus/Pro & Ultra).</li>
            <li>• Maximum context window of all <strong>Claude</strong> models is 200k tokens.</li>
            <li>• 1M tokens equals 1048k tokens.</li>
          </ul>
        </div>
      </div>

      <!-- Visual Reasoning - MMMU-Pro -->
      <div class="section-title-wrapper" style="margin-top: 3rem;">
        <h2 class="section-title">Visual Reasoning — MMMU-Pro</h2>
        <div class="toggle-inline">
          <span class="toggle-label">Claude models</span>
          <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
        </div>
        <div class="toggle-inline reasoning-toggle">
          <span class="toggle-label">Reasoning models</span>
          <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
        </div>
        <div class="toggle-inline instant-toggle">
          <span class="toggle-label">Non-reasoning models</span>
          <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
        </div>
        <div class="toggle-inline chatgpt-pro-toggle">
          <span class="toggle-label">ChatGPT Pro-only models</span>
          <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="mmmuProChart"></canvas>
      </div>
      <p class="chart-note">Shows performance processing visual and textual information at the same time. Higher is
        better.</p>

      <!-- Notes for MMMU-Pro chart -->
      <div class="notes collapsible expanded" style="margin-top: 1rem; display: none;">
        <div class="notes-header" onclick="toggleNotes(this)">
          <p class="notes-title">MMMU-Pro Notes</p>
          <span class="notes-toggle">▼</span>
        </div>
        <div class="notes-content">
          <ul class="notes-list">
            <li>• Lorem ipsum delenda est.
            </li>
          </ul>
        </div>
      </div>

      <!-- Terminal-Bench Hard -->
      <div class="coding-benchmark-section">
        <div class="section-title-wrapper" style="margin-top: 3rem;">
          <h2 class="section-title section-title-blue">Agentic Coding — Terminal-Bench Hard</h2>
          <div class="toggle-inline">
            <span class="toggle-label">Claude models</span>
            <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
          </div>
          <div class="toggle-inline reasoning-toggle">
            <span class="toggle-label">Reasoning models</span>
            <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
          </div>
          <div class="toggle-inline instant-toggle">
            <span class="toggle-label">Non-reasoning models</span>
            <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
          </div>
          <div class="toggle-inline chatgpt-pro-toggle">
            <span class="toggle-label">ChatGPT Pro-only models</span>
            <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="terminalBenchChart"></canvas>
        </div>
        <p class="chart-note">Shows capabilities in terminal environments. Higher is better.</p>
      </div>

      <!-- τ²-Bench Telecom -->
      <div class="coding-benchmark-section">
        <div class="section-title-wrapper" style="margin-top: 3rem;">
          <h2 class="section-title section-title-blue">Agentic Tool Use — τ²-Bench Telecom</h2>
          <div class="toggle-inline">
            <span class="toggle-label">Claude models</span>
            <div class="toggle-switch claude-toggle active" onclick="toggleClaudeModels()"></div>
          </div>
          <div class="toggle-inline reasoning-toggle">
            <span class="toggle-label">Reasoning models</span>
            <div class="toggle-switch reasoning-model-toggle active" onclick="toggleReasoningModels()"></div>
          </div>
          <div class="toggle-inline instant-toggle">
            <span class="toggle-label">Non-reasoning models</span>
            <div class="toggle-switch instant-model-toggle active" onclick="toggleInstantModels()"></div>
          </div>
          <div class="toggle-inline chatgpt-pro-toggle">
            <span class="toggle-label">ChatGPT Pro-only models</span>
            <div class="toggle-switch chatgpt-pro-model-toggle" onclick="toggleChatGPTProModels()"></div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="tau2BenchChart"></canvas>
        </div>
        <p class="chart-note">Shows performance guiding a user through technical troubleshooting. Higher is better.</p>
      </div>

      <!-- Notes -->
      <div class="notes" style="margin-top: 2rem;">
        <p class="notes-title">Notes</p>
        <ul class="notes-list">
          <li>• For "<strong>GPT 5.2 Codex</strong>", "<em>gpt-5.2-codex:xhigh</em>" was used in the graph. This model
            is only
            available on Codex and Visual Studio Code, not the web or the app.</li>
          <li>• For "<strong>GPT 5.2 Thinking xhigh</strong>", "<em>gpt-5.2:xhigh</em>" was used in the graph.
            A weaker (x0.67 maximum reasoning time) version of this model is available only for ChatGPT Pro accounts, by
            selecting "heavy" as the thinking effort with 5.2 Thinking or "standard" as the thinking effort with 5.2
            Pro.
            The actual model is available only when selecting "extended" as the thinking effort with 5.2 Pro.
          </li>
          <li>• For "<strong>GPT 5.2 Thinking</strong>", "<em>gpt-5.2:medium</em>" was used in the graph.
            A stronger (x4 maximum reasoning time) version of this model is available for ChatGPT Plus and Pro accounts,
            by selecting "extended" as the thinking effort with 5.2 Thinking. Selecting "standard" as the thinking
            effort actually uses a model weaker than it (x0.25 maximum reasoning time).
            There are unfortunately no benchmarks for those two exact models.
          </li>
          <li>• For "<strong>GPT 5.2 Instant</strong>", "<em>gpt-5.2</em>" was used in the graph.</li>
          <li>• For "<strong>GPT 5 Thinking Mini</strong>", "<em>gpt-5-mini:medium</em>" was used in the graph.</li>
          <li>• For "<strong>Gemini 3 Pro</strong>", "<em>gemini-3-pro-preview:high</em>" was used in the
            graph.</li>
          <li>• For "<strong>Gemini 3 Flash Thinking</strong>", "<em>gemini-3-flash-preview:thinking:high</em>" was used
            in the graph.
          </li>
          <li>• For "<strong>Gemini 3 Flash</strong>", "<em>gemini-3-flash-preview</em>" was used in the
            graph.</li>
          <li>• For "<strong>Claude Opus 4.6 Extended</strong>", "<em>claude-opus-4.6:high</em>" was used in
            the graph.</li>
          <li>• For "<strong>Claude Opus 4.6</strong>", "<em>claude-opus-4.6</em>" was used in
            the graph.</li>
          <li>• For "<strong>Claude Opus 4.5 Extended</strong>", "<em>claude-opus-4.5:high</em>" was used in
            the graph.</li>
          <li>• For "<strong>Claude Opus 4.5</strong>", "<em>claude-opus-4.5</em>" was used in
            the graph.</li>
          <li>• For "<strong>Claude Sonnet 4.5 Extended</strong>", "<em>claude-sonnet-4.5:high</em>" was used
            in the graph.</li>
          <li>• For "<strong>Claude Sonnet 4.5</strong>", "<em>claude-sonnet-4.5</em>" was used
            in the graph.</li>
          <li>• For "<strong>Claude Haiku 4.5 Extended</strong>", "<em>claude-haiku-4.5:high</em>" was used in
            the graph.</li>
          <li>• For "<strong>Claude Haiku 4.5</strong>", "<em>claude-haiku-4.5</em>" was used in
            the graph.</li>
          <li>• Claude Opus 4.6 Extended, Claude Sonnet 4.5 Extended and Claude Sonnet 4.5 are available for free to
            Gemini users through the Antigravity app, with limits that reset depending on demand (usually every 5
            hours).</li>
        </ul>
      </div>
    </section>

    <!-- TAB 3: BENEFITS -->
    <section id="tab-benefits" class="tab-content">
      <div class="benefits-grid">
        <!-- ChatGPT -->
        <div class="benefit-card chatgpt">
          <div class="benefit-header">
            <div class="benefit-icon">⌘</div>
            <h2 class="benefit-title">ChatGPT</h2>
          </div>
          <ul class="benefit-list">
            <li>Web search on thinking models thinks significantly longer (can easily take 7-10 min vs Gemini's 1-3 min)
            </li>
            <li>Easy switching between different personalities</li>
            <li>Can connect to a limited selection of websites, as well as to a web version of Photoshop, though tool
              calls can be inconsistent</li>
          </ul>
        </div>

        <!-- Gemini -->
        <div class="benefit-card gemini">
          <div class="benefit-header">
            <div class="benefit-icon">✦</div>
            <h2 class="benefit-title">Gemini</h2>
          </div>
          <ul class="benefit-list">
            <li>Nano Banana Pro offers faster image generation than GPT Image 1.5. Its images also appear more realistic
              (subjectively).</li>
            <li>Native Android integration (iOS confirmed to come soon), though it can be over-eager with tool calls
            </li>
            <li>Offers uses of Claude Opus 4.6 Extended, Claude Sonnet 4.5 Extended and Claude Sonnet 4.5 through the
              Antigravity app</li>
          </ul>
        </div>
      </div>
    </section>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    /*
     * ╔══════════════════════════════════════════════════════════════════╗
     * ║                    ANNOTATION SYSTEM                           ║
     * ╠══════════════════════════════════════════════════════════════════╣
     * ║  Annotations use semantic IDs instead of hardcoded numbers.    ║
     * ║  To add a new annotation:                                      ║
     * ║  1. Add an entry to FOOTNOTES below with a unique ID           ║
     * ║  2. Use <span class="annotation" data-note="your-id"></span>  ║
     * ║     in the HTML wherever the annotation should appear          ║
     * ║  Numbers are auto-assigned based on first appearance order.    ║
     * ╚══════════════════════════════════════════════════════════════════╝
     */
    const FOOTNOTES = {
      'gpt5-mini-free': "Free and Go accounts don't have access to GPT 5.2 Thinking, and GPT 5 Thinking Mini won't be removed unlike the other GPT 5 models, which makes it likely that this is the model used.",
      'gpt-image-unknown': "GPT Image 1.5 limits are unknown. GPT Image 1 limits were 50/day for Plus, 5/day for Free.",
      'user-reports': "According to user reports. The actual limits are not public.",
      'usa-only': "Only in the USA, for now.",
      'nano-banana-pro-throttle': "Google tends to throttle the daily limit of image generation when a new model or AI tool is released.",
      '1m-tokens': "Exactly 1048k tokens.",
      'gemini-memory': "While Gemini has a memory feature, it sometimes calls memory when not needed, or decides not to call it when actually needed; which sometimes provokes inconsistent outputs.",
      'ecosystem-memory': "Gemini can use your connected Google services (such as Gmail; Google Drive; Google Photos; Google, Maps, and YouTube search history and other Google Workspace services) through Gemini Personal Intelligence to help you find information, personalize answers and more. Of course, only if toggled by the user, since the option is off by default.",
      'notebooklm': "NotebookLM differs from Projects. While it can be linked with Gemini chats, it lacks a folder structure when used inside Gemini; and when used on the NotebookLM site it is less creative due to an anti-hallucination tuning.",
      'free-15gb': "Free accounts use the Google account's free 15GB storage.",
      'age-ai': "AI-based age estimation can be unreliable, sometimes flagging an account as underage based on the user's preferences.",
      'age-verification': "Which age verification method is better depends on whether you're more comfortable sharing proof of a credit card (or an ID if you don't have one) with Google, or sharing your ID with Persona Identities.",
      'chatgpt-pulse': "ChatGPT can proactively research topics and present them as a briefing, unprompted, through ChatGPT Pulse.",
    };

    function toSuperscript(num) {
      const superDigits = '⁰¹²³⁴⁵⁶⁷⁸⁹';
      return String(num).split('').map(d => superDigits[parseInt(d)]).join('');
    }

    function initAnnotations() {
      const annotations = document.querySelectorAll('.annotation[data-note]');
      const footnotesList = document.getElementById('footnotes-list');
      const idToNumber = {};
      let counter = 1;

      // First pass: assign numbers in order of first appearance
      annotations.forEach(el => {
        const noteId = el.getAttribute('data-note');
        if (!idToNumber[noteId]) {
          idToNumber[noteId] = counter++;
        }
      });

      // Second pass: set text content and tooltip
      annotations.forEach(el => {
        const noteId = el.getAttribute('data-note');
        const num = idToNumber[noteId];
        el.textContent = toSuperscript(num);
        el.setAttribute('data-tooltip', FOOTNOTES[noteId] || '(Missing footnote)');
      });

      // Generate footnotes list
      if (footnotesList) {
        footnotesList.innerHTML = '';
        for (const [id, num] of Object.entries(idToNumber)) {
          const li = document.createElement('li');
          li.setAttribute('data-num', num + '.');
          li.textContent = FOOTNOTES[id] || '(Missing footnote)';
          footnotesList.appendChild(li);
        }
      }
    }

    // Run annotation system as early as possible
    initAnnotations();

    function switchTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
      document.getElementById('tab-' + tabId).classList.add('active');
      document.getElementById('btn-' + tabId).classList.add('active');
      // Save active tab to localStorage
      localStorage.setItem('activeMainTab', tabId);

      // Fix for Chart.js timing issues: when switching to benchmarks tab,
      // trigger a resize on all charts after a short delay to ensure proper rendering
      if (tabId === 'benchmarks') {
        setTimeout(() => {
          if (typeof omniscienceChart !== 'undefined') omniscienceChart.resize();
          if (typeof mrcrChart !== 'undefined') mrcrChart.resize();
          if (typeof lcrChart !== 'undefined') lcrChart.resize();
          if (typeof mmmuProChart !== 'undefined') mmmuProChart.resize();
          if (typeof terminalBenchChart !== 'undefined') terminalBenchChart.resize();
          if (typeof tau2BenchChart !== 'undefined') tau2BenchChart.resize();
        }, 50);
      }
    }

    // Toggle collapsible notes
    function toggleNotes(header) {
      const notes = header.parentElement;
      notes.classList.toggle('expanded');
    }

    // Chart.js configuration
    Chart.defaults.color = '#b3a385';
    Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.08)';
    Chart.defaults.font.family = "'Inter', sans-serif";

    // Function to create striped pattern for non-reasoning models
    function createStripedPattern(baseColor, stripeColor = 'rgba(0, 0, 0, 0.15)') {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const size = 10;
      canvas.width = size;
      canvas.height = size;

      // Fill with base color
      ctx.fillStyle = baseColor;
      ctx.fillRect(0, 0, size, size);

      // Draw diagonal stripes
      ctx.strokeStyle = stripeColor;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(0, size);
      ctx.lineTo(size, 0);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(-size / 2, size / 2);
      ctx.lineTo(size / 2, -size / 2);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(size / 2, size + size / 2);
      ctx.lineTo(size + size / 2, size / 2);
      ctx.stroke();

      return ctx.createPattern(canvas, 'repeat');
    }

    // Colors
    const chatgptColor = '#10a37f';
    const chatgptColorLight = 'rgba(16, 163, 127, 0.7)';
    const geminiColor = '#f34d65';
    const geminiColorLight = 'rgba(243, 77, 101, 0.7)';
    const claudeColor = '#ff7e21';
    const claudeColorLight = 'rgba(255, 126, 33, 0.7)';

    // Legacy (older model) colors — desaturated and muted
    const chatgptLegacyColor = 'rgba(100, 150, 135, 0.55)';
    const chatgptLegacyColorLight = 'rgba(100, 150, 135, 0.3)';
    const claudeLegacyColor = 'rgba(180, 140, 100, 0.55)';
    const claudeLegacyColorLight = 'rgba(180, 140, 100, 0.3)';
    const geminiLegacyColor = 'rgba(180, 110, 120, 0.55)';
    const geminiLegacyColorLight = 'rgba(180, 110, 120, 0.3)';

    // Track Claude, Instant, ChatGPT Pro, and Coding visibility (legacy flags for compatibility)
    let showClaudeModels = true;
    let showInstantModels = true;
    let showChatGPTProModels = false;
    let showCodingBenchmarks = false;
    let showReasoningModels = true;
    let omniscienceChart, mrcrChart;

    // Individual model visibility
    const modelVisibility = {
      'gpt-codex': false,      // Starts hidden (coding toggle off)
      'gpt-xhigh': false,      // Starts hidden (ChatGPT Pro toggle off)
      'gpt-thinking': true,
      'gpt-thinking-mini': true,
      'gpt-instant': true,
      'gemini-pro': true,
      'gemini-flash-thinking': true,
      'gemini-flash': true,
      'claude-opus': false,    // Starts hidden by default
      'claude-sonnet': true,
      'claude-haiku': false,   // Starts hidden by default
      'claude-46-opus': true,     // Starts visible by default
      'claude-46-opus-nr': false, // Starts hidden by default
      'claude-opus-nr': false,    // Non-reasoning, starts hidden
      'claude-sonnet-nr': false,  // Non-reasoning, starts hidden
      'claude-haiku-nr': false    // Non-reasoning, starts hidden
    };

    // Track which models were EXPLICITLY disabled by the user clicking the dot
    // When a group toggle is turned ON, models that were explicitly disabled stay disabled
    // When a group toggle is turned OFF, all models in group are disabled (not marked as explicit)
    const modelExplicitlyDisabled = {
      'gpt-codex': false,
      'gpt-xhigh': false,
      'gpt-thinking': false,
      'gpt-thinking-mini': false,
      'gpt-instant': false,
      'gemini-pro': false,
      'gemini-flash-thinking': false,
      'gemini-flash': false,
      'claude-opus': true,     // Starts explicitly disabled
      'claude-sonnet': false,
      'claude-haiku': true,    // Starts explicitly disabled
      'claude-46-opus': false,    // Starts enabled by default
      'claude-46-opus-nr': true,  // Starts explicitly disabled
      'claude-opus-nr': true,     // Starts explicitly disabled
      'claude-sonnet-nr': true,   // Starts explicitly disabled  
      'claude-haiku-nr': true     // Starts explicitly disabled
    };

    // Model groups for group toggles
    const modelGroups = {
      'claude': ['claude-opus', 'claude-sonnet', 'claude-haiku', 'claude-46-opus', 'claude-46-opus-nr', 'claude-opus-nr', 'claude-sonnet-nr', 'claude-haiku-nr'],
      'reasoning': ['gpt-codex', 'gpt-xhigh', 'gpt-thinking', 'gpt-thinking-mini', 'gemini-pro', 'gemini-flash-thinking', 'claude-opus', 'claude-sonnet', 'claude-haiku', 'claude-46-opus'],
      'instant': ['gpt-instant', 'gemini-flash', 'claude-46-opus-nr', 'claude-opus-nr', 'claude-sonnet-nr', 'claude-haiku-nr'],
      'chatgpt-pro': ['gpt-xhigh'],
      'coding': ['gpt-codex']
    };

    // Model constraints: which group toggles must ALL be active for a model to be visible
    // When a group is turned ON, models are only activated if all their other constraints are met
    const modelConstraints = {
      'gpt-codex': ['reasoning', 'coding'],           // Needs both Reasoning AND Coding to be on
      'gpt-xhigh': ['reasoning', 'chatgpt-pro'],      // Needs both Reasoning AND ChatGPT Pro to be on
      'gpt-thinking': ['reasoning'],                   // Only needs Reasoning
      'gpt-thinking-mini': ['reasoning'],               // Only needs Reasoning
      'gpt-instant': ['instant'],                      // Only needs Non-reasoning
      'gemini-pro': ['reasoning'],                     // Only needs Reasoning
      'gemini-flash-thinking': ['reasoning'],          // Only needs Reasoning
      'gemini-flash': ['instant'],                     // Only needs Non-reasoning
      'claude-opus': ['claude', 'reasoning'],          // Needs both Claude AND Reasoning to be on
      'claude-sonnet': ['claude', 'reasoning'],        // Needs both Claude AND Reasoning to be on
      'claude-haiku': ['claude', 'reasoning'],         // Needs both Claude AND Reasoning to be on
      'claude-46-opus': ['claude', 'reasoning'],       // Needs both Claude AND Reasoning to be on
      'claude-46-opus-nr': ['claude', 'instant'],      // Needs both Claude AND Non-reasoning to be on
      'claude-opus-nr': ['claude', 'instant'],         // Needs both Claude AND Non-reasoning to be on
      'claude-sonnet-nr': ['claude', 'instant'],       // Needs both Claude AND Non-reasoning to be on
      'claude-haiku-nr': ['claude', 'instant']         // Needs both Claude AND Non-reasoning to be on
    };

    // Get the current state of a group toggle
    function isGroupEnabled(groupName) {
      switch (groupName) {
        case 'claude': return showClaudeModels;
        case 'reasoning': return showReasoningModels;
        case 'instant': return showInstantModels;
        case 'chatgpt-pro': return showChatGPTProModels;
        case 'coding': return showCodingBenchmarks;
        default: return true;
      }
    }

    // Check if a model should be visible based on all its constraints AND explicit disable state
    function shouldModelBeVisible(modelId) {
      // If user explicitly disabled this model, don't show it
      if (modelExplicitlyDisabled[modelId]) {
        return false;
      }
      // Otherwise, check all group constraints
      const constraints = modelConstraints[modelId] || [];
      return constraints.every(group => isGroupEnabled(group));
    }

    // Toggle filters panel
    function toggleFiltersPanel() {
      const panel = document.getElementById('modelFiltersPanel');
      panel.classList.toggle('expanded');
      localStorage.setItem('filtersPanelExpanded', panel.classList.contains('expanded'));
    }

    // Update all model dots to reflect current visibility
    function updateModelDotsUI() {
      document.querySelectorAll('.model-dot').forEach(dot => {
        const modelId = dot.getAttribute('data-model');
        if (modelVisibility[modelId]) {
          dot.classList.remove('inactive');
        } else {
          dot.classList.add('inactive');
        }
      });
    }

    // Toggle individual model visibility
    function toggleIndividualModel(modelId) {
      modelVisibility[modelId] = !modelVisibility[modelId];

      // Track explicit disable: if user clicks to disable, mark as explicit
      // If user clicks to enable, clear the explicit flag
      modelExplicitlyDisabled[modelId] = !modelVisibility[modelId];

      // Update UI
      updateModelDotsUI();
      syncGroupToggles();

      // Update legacy flags based on model states
      updateLegacyFlags();

      // Update all charts
      updateAllCharts();

      // Save state (including explicit disable tracking)
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
    }

    // Sync group toggle UI based on individual model states
    function syncGroupToggles() {
      // Claude group
      const allClaudeVisible = modelGroups.claude.every(m => modelVisibility[m]);
      const someClaudeVisible = modelGroups.claude.some(m => modelVisibility[m]);
      document.querySelectorAll('.claude-toggle').forEach(toggle => {
        toggle.classList.toggle('active', someClaudeVisible);
      });

      // Reasoning group
      const allReasoningVisible = modelGroups.reasoning.every(m => modelVisibility[m]);
      const someReasoningVisible = modelGroups.reasoning.some(m => modelVisibility[m]);
      document.querySelectorAll('.reasoning-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', someReasoningVisible);
      });

      // Instant group
      const allInstantVisible = modelGroups.instant.every(m => modelVisibility[m]);
      const someInstantVisible = modelGroups.instant.some(m => modelVisibility[m]);
      document.querySelectorAll('.instant-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', someInstantVisible);
      });

      // ChatGPT Pro group
      const someChatGPTProVisible = modelGroups['chatgpt-pro'].some(m => modelVisibility[m]);
      document.querySelectorAll('.chatgpt-pro-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', someChatGPTProVisible);
      });

      // Coding group - active if either section is visible OR codex model is visible
      const someCodingVisible = modelGroups.coding.some(m => modelVisibility[m]);
      document.querySelectorAll('.coding-bench-toggle').forEach(toggle => {
        toggle.classList.toggle('active', showCodingBenchmarks || someCodingVisible);
      });

      // Update coding section dot
      const codingDot = document.querySelector('[data-model="coding-benchmarks"]');
      if (codingDot) {
        codingDot.classList.toggle('inactive', !showCodingBenchmarks);
      }
    }

    // Update legacy flags - NO LONGER derives group states from model visibility
    // Group toggle states (showClaudeModels, etc.) are now independent and only change when user clicks the toggle
    // This allows the constraint system to work correctly
    function updateLegacyFlags() {
      // Intentionally empty - group toggle states are now managed independently
      // They only change when the user explicitly clicks a group toggle
      // This enables the smart constraint system to work correctly
    }

    // Toggle reasoning models group
    function toggleReasoningModels() {
      showReasoningModels = !showReasoningModels;

      // If turning ON and all models are explicitly disabled, reset explicit flags
      if (showReasoningModels) {
        const allExplicitlyDisabled = modelGroups.reasoning.every(m => modelExplicitlyDisabled[m]);
        if (allExplicitlyDisabled) {
          modelGroups.reasoning.forEach(m => { modelExplicitlyDisabled[m] = false; });
        }
      }

      // Update modelVisibility for reasoning models respecting constraints
      modelGroups.reasoning.forEach(modelId => {
        if (showReasoningModels) {
          // When turning ON: only activate if ALL constraints are met
          modelVisibility[modelId] = shouldModelBeVisible(modelId);
        } else {
          // When turning OFF: always disable
          modelVisibility[modelId] = false;
        }
      });

      // Sync all reasoning toggles
      document.querySelectorAll('.reasoning-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', showReasoningModels);
      });

      // Update UI
      updateModelDotsUI();
      syncGroupToggles();
      updateLegacyFlags();
      updateAllCharts();

      // Save state
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
      localStorage.setItem('reasoningModelsVisible', showReasoningModels);
    }

    // Update all charts with animation
    function updateAllCharts() {
      const animationConfig = {
        duration: 750,
        easing: 'easeInOutQuart'
      };

      // Update Omniscience chart
      const omniscienceData = getOmniscienceData();
      omniscienceChart.data.labels = omniscienceData.labels;
      omniscienceChart.data.datasets[0].data = omniscienceData.correct;
      omniscienceChart.data.datasets[0].backgroundColor = omniscienceData.correctBgColors;
      omniscienceChart.data.datasets[1].data = omniscienceData.abstention;
      omniscienceChart.data.datasets[1].backgroundColor = omniscienceData.abstentionBgColors;
      omniscienceChart.data.datasets[2].data = omniscienceData.hallucination;
      omniscienceChart.data.datasets[2].backgroundColor = omniscienceData.hallucinationBgColors;
      omniscienceChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });

      // Update MRCR chart
      mrcrChart.data.datasets = getMrcrDatasets();
      mrcrChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });

      // Update LCR chart
      const lcrData = getLcrData();
      lcrChart.data.labels = lcrData.labels;
      lcrChart.data.datasets[0].data = lcrData.data;
      lcrChart.data.datasets[0].backgroundColor = lcrData.backgroundColors;
      lcrChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });

      // Update MMMU-Pro chart
      const mmmuProData = getMmmuProData();
      mmmuProChart.data.labels = mmmuProData.labels;
      mmmuProChart.data.datasets[0].data = mmmuProData.data;
      mmmuProChart.data.datasets[0].backgroundColor = mmmuProData.backgroundColors;
      mmmuProChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });

      // Update Terminal-Bench chart
      const terminalBenchData = getTerminalBenchData();
      terminalBenchChart.data.labels = terminalBenchData.labels;
      terminalBenchChart.data.datasets[0].data = terminalBenchData.data;
      terminalBenchChart.data.datasets[0].backgroundColor = terminalBenchData.backgroundColors;
      terminalBenchChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });

      // Update τ²-Bench chart
      const tau2BenchData = getTau2BenchData();
      tau2BenchChart.data.labels = tau2BenchData.labels;
      tau2BenchChart.data.datasets[0].data = tau2BenchData.data;
      tau2BenchChart.data.datasets[0].backgroundColor = tau2BenchData.backgroundColors;
      tau2BenchChart.update({ duration: animationConfig.duration, easing: animationConfig.easing });
    }

    // DISABLED: Striped patterns for non-reasoning models (GPT 5.2 Instant, Gemini 3 Flash)
    // Set to true to enable diagonal striped patterns on bar charts for non-reasoning models.
    // The createStripedPattern() function and pattern logic in getData functions are ready to use.
    // Currently disabled - will revisit when a better visual approach is found.
    const useStripedPatternsForNonReasoning = false;

    // ============================================================================
    // MODEL ORDERING SYSTEM (FUTURE-PROOF)
    // ============================================================================
    // Each model has a sortOrder value. Lower numbers appear first.
    // Use gaps of 10 to allow inserting new models between existing ones.
    // Example: To add a model between GPT Codex (10) and GPT Thinking (20), use 15.
    //
    // Current order:
    //   10: ⌘ GPT 5.2 Codex (coding toggle)
    //   15: ⌘ GPT 5.2 Thinking xhigh
    //   20: ⌘ GPT 5.2 Thinking
    //   25: ⌘ GPT 5 Thinking Mini
    //   30: ⌘ GPT 5.2 Instant (instant toggle)
    //   40: ✦ Gemini 3 Pro
    //   50: ✦ Gemini 3 Flash Thinking
    //   60: ✦ Gemini 3 Flash (instant toggle)
    //   70: ❋ Claude 4.5 Opus Extended (claude toggle)
    //   80: ❋ Claude 4.5 Sonnet Extended (claude toggle)
    //   90: ❋ Claude 4.5 Haiku Extended (claude toggle)
    // ============================================================================

    // Base data for AA-Omniscience using object structure with sortOrder and modelId
    const omniscienceAllModels = [
      { modelId: 'gpt-codex', label: '⌘ GPT 5.2 Codex', correct: 38.45, abstention: 17.55, hallucination: 44.0, sortOrder: 10 },
      { modelId: 'gpt-xhigh', label: '⌘ GPT 5.2 Thinking xhigh', correct: 41.35, abstention: 12.99, hallucination: 45.66, sortOrder: 15 },
      { modelId: 'gpt-thinking', label: '⌘ GPT 5.2 Thinking', correct: 35.53, abstention: 25.68, hallucination: 38.79, sortOrder: 20 },
      { modelId: 'gpt-thinking-mini', label: '⌘ GPT 5 Thinking Mini', correct: 27.22, abstention: 41.21, hallucination: 31.57, sortOrder: 25 },
      { modelId: 'gpt-instant', label: '⌘ GPT 5.2 Instant', correct: 27.95, abstention: 29.32, hallucination: 42.73, sortOrder: 30 },
      { modelId: 'gemini-pro', label: '✦ Gemini 3 Pro', correct: 53.65, abstention: 4.20, hallucination: 42.16, sortOrder: 40 },
      { modelId: 'gemini-flash-thinking', label: '✦ Gemini 3 Flash Thinking', correct: 51.87, abstention: 4.50, hallucination: 43.63, sortOrder: 50 },
      { modelId: 'gemini-flash', label: '✦ Gemini 3 Flash', correct: 47.15, abstention: 6.35, hallucination: 46.50, sortOrder: 60 },
      { modelId: 'claude-46-opus', label: '❋ Claude 4.6 Opus Extended', correct: 44.32, abstention: 22.30, hallucination: 33.38, sortOrder: 65 },
      { modelId: 'claude-46-opus-nr', label: '❋ Claude 4.6 Opus', correct: 43.77, abstention: 13.66, hallucination: 42.57, sortOrder: 66 },
      { modelId: 'claude-opus', label: '❋ Claude 4.5 Opus Extended', correct: 43.12, abstention: 24.00, hallucination: 32.88, sortOrder: 70 },
      { modelId: 'claude-opus-nr', label: '❋ Claude 4.5 Opus', correct: 38.90, abstention: 15.75, hallucination: 45.35, sortOrder: 75 },
      { modelId: 'claude-sonnet', label: '❋ Claude 4.5 Sonnet Extended', correct: 30.90, abstention: 36.12, hallucination: 32.98, sortOrder: 80 },
      { modelId: 'claude-sonnet-nr', label: '❋ Claude 4.5 Sonnet', correct: 26.93, abstention: 35.48, hallucination: 37.59, sortOrder: 85 },
      { modelId: 'claude-haiku', label: '❋ Claude 4.5 Haiku Extended', correct: 16.18, abstention: 61.97, hallucination: 21.85, sortOrder: 90 },
      { modelId: 'claude-haiku-nr', label: '❋ Claude 4.5 Haiku', correct: 13.42, abstention: 65.21, hallucination: 21.37, sortOrder: 95 }
    ];

    // Current sort mode for omniscience: 'brand', 'hallucination', 'correct'
    let omniscienceSortMode = 'brand';

    function setOmniscienceSort(mode) {
      omniscienceSortMode = mode;
      // Update button UI
      document.querySelectorAll('.sort-selector .sort-btn').forEach(btn => btn.classList.remove('active'));
      if (mode === 'brand') document.getElementById('omniscienceSortBrand').classList.add('active');
      else if (mode === 'hallucination') document.getElementById('omniscienceSortHallucination').classList.add('active');
      else if (mode === 'correct') document.getElementById('omniscienceSortCorrect').classList.add('active');
      // Refresh chart
      const omniscienceData = getOmniscienceData();
      omniscienceChart.data.labels = omniscienceData.labels;
      omniscienceChart.data.datasets[0].data = omniscienceData.correct;
      omniscienceChart.data.datasets[0].backgroundColor = omniscienceData.correctBgColors;
      omniscienceChart.data.datasets[1].data = omniscienceData.abstention;
      omniscienceChart.data.datasets[1].backgroundColor = omniscienceData.abstentionBgColors;
      omniscienceChart.data.datasets[2].data = omniscienceData.hallucination;
      omniscienceChart.data.datasets[2].backgroundColor = omniscienceData.hallucinationBgColors;
      omniscienceChart.update({ duration: 750, easing: 'easeInOutQuart' });
    }

    function getOmniscienceData() {
      // Filter models based on modelVisibility
      let models = omniscienceAllModels.filter(m => modelVisibility[m.modelId]);

      // Sort based on current sort mode
      if (omniscienceSortMode === 'hallucination') {
        // Lower hallucination is better → ascending order
        models.sort((a, b) => a.hallucination - b.hallucination);
      } else if (omniscienceSortMode === 'correct') {
        // Higher correct is better → descending order
        models.sort((a, b) => b.correct - a.correct);
      } else {
        // Default: sort by brand/family grouping
        models.sort((a, b) => a.sortOrder - b.sortOrder);
      }

      // Extract arrays for Chart.js
      const labels = models.map(m => m.label);
      const correct = models.map(m => m.correct);
      const abstention = models.map(m => m.abstention);
      const hallucination = models.map(m => m.hallucination);

      // Create background colors arrays with striped pattern for non-reasoning models
      const correctColor = 'rgba(34, 197, 94, 0.7)';
      const abstentionColor = 'rgba(139, 92, 246, 0.7)';
      const hallucinationColor = 'rgba(239, 68, 68, 0.7)';

      let correctBgColors, abstentionBgColors, hallucinationBgColors;

      if (useStripedPatternsForNonReasoning) {
        const correctStriped = createStripedPattern(correctColor);
        const abstentionStriped = createStripedPattern(abstentionColor);
        const hallucinationStriped = createStripedPattern(hallucinationColor);

        correctBgColors = labels.map(label =>
          (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') ? correctStriped : correctColor
        );
        abstentionBgColors = labels.map(label =>
          (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') ? abstentionStriped : abstentionColor
        );
        hallucinationBgColors = labels.map(label =>
          (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') ? hallucinationStriped : hallucinationColor
        );
      } else {
        correctBgColors = correctColor;
        abstentionBgColors = abstentionColor;
        hallucinationBgColors = hallucinationColor;
      }

      return { labels, correct, abstention, hallucination, correctBgColors, abstentionBgColors, hallucinationBgColors };
    }

    // AA-Omniscience Benchmark - Grouped Bar Chart
    const omniscienceCtx = document.getElementById('omniscienceChart').getContext('2d');
    const omniscienceData = getOmniscienceData();
    omniscienceChart = new Chart(omniscienceCtx, {
      type: 'bar',
      data: {
        labels: omniscienceData.labels,
        datasets: [
          {
            label: 'Correct ↑',
            data: omniscienceData.correct,
            backgroundColor: omniscienceData.correctBgColors,
            borderColor: 'rgba(34, 197, 94, 1)',
            borderWidth: 1,
            borderRadius: 4
          },
          {
            label: 'Abstention ↑',
            data: omniscienceData.abstention,
            backgroundColor: omniscienceData.abstentionBgColors,
            borderColor: 'rgba(139, 92, 246, 1)',
            borderWidth: 1,
            borderRadius: 4
          },
          {
            label: 'Hallucination ↓',
            data: omniscienceData.hallucination,
            backgroundColor: omniscienceData.hallucinationBgColors,
            borderColor: 'rgba(239, 68, 68, 1)',
            borderWidth: 1,
            borderRadius: 4
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              padding: 20,
              usePointStyle: true,
              pointStyle: 'rectRounded'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                return context.dataset.label + ': ' + context.parsed.y + '%';
              }
            }
          }
        },
        scales: {
          y: {
            stacked: true,
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            }
          },
          x: {
            stacked: true,
            grid: {
              display: false
            }
          }
        }
      }
    });

    // Base datasets for MRCR - with modelId for filtering and sortOrder for ordering
    // Note: GPT 5.2 Codex has no data for MRCR v2 8-Needle, so it's not included here
    const mrcrAllDatasets = [
      {
        modelId: 'gpt-xhigh',
        label: 'GPT 5.2 Thinking xhigh',
        data: [95.4, 87.9, 93.1, 88.2, 75.7, null],
        borderColor: chatgptColor,
        backgroundColor: chatgptColorLight,
        borderWidth: 3,
        tension: 0.3,
        pointRadius: 6,
        pointHoverRadius: 8,
        pointBackgroundColor: chatgptColor,
        spanGaps: false,
        sortOrder: 15
      },
      {
        modelId: 'gpt-thinking',
        label: 'GPT 5.2 Thinking',
        data: [87.9, 78.2, 75.7, 66.7, 63.1, null],
        borderColor: 'rgba(16, 163, 127, 0.7)',
        backgroundColor: 'rgba(16, 163, 127, 0.5)',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(16, 163, 127, 0.7)',
        spanGaps: false,
        sortOrder: 20
      },
      {
        modelId: 'gpt-thinking-mini',
        label: 'GPT 5 Thinking Mini',
        data: [76.3, 57.1, 55, 42.3, 31.9, null],
        borderColor: chatgptLegacyColor,
        backgroundColor: chatgptLegacyColorLight,
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: chatgptLegacyColor,
        spanGaps: false,
        sortOrder: 25
      },
      {
        modelId: 'gpt-instant',
        label: 'GPT 5.2 Instant',
        data: [49.4, 45.1, 50.4, 41.5, 31.9, null],
        borderColor: 'rgba(16, 163, 127, 0.5)',
        backgroundColor: 'rgba(16, 163, 127, 0.3)',
        borderWidth: 2,
        borderDash: [5, 5],
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(16, 163, 127, 0.5)',
        spanGaps: false,
        sortOrder: 30
      },
      {
        modelId: 'gemini-pro',
        label: 'Gemini 3 Pro',
        data: [98.0, 91.3, 86.6, 72.1, 54.2, 24.5],
        borderColor: geminiColor,
        backgroundColor: geminiColorLight,
        borderWidth: 3,
        tension: 0.3,
        pointRadius: 6,
        pointHoverRadius: 8,
        pointBackgroundColor: geminiColor,
        sortOrder: 40
      },
      {
        modelId: 'gemini-flash-thinking',
        label: 'Gemini 3 Flash Thinking',
        data: [96.7, 85.3, 84.9, 72.9, 51.5, 32.6],
        borderColor: 'rgba(243, 77, 101, 0.7)',
        backgroundColor: 'rgba(243, 77, 101, 0.5)',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(243, 77, 101, 0.7)',
        sortOrder: 50
      },
      {
        modelId: 'gemini-flash',
        label: 'Gemini 3 Flash',
        data: [75.5, 46.2, 39.0, 36.9, 25.4, 25.7],
        borderColor: 'rgba(243, 77, 101, 0.4)',
        backgroundColor: 'rgba(243, 77, 101, 0.2)',
        borderWidth: 2,
        borderDash: [5, 5],
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(243, 77, 101, 0.4)',
        sortOrder: 60
      },
      {
        modelId: 'claude-46-opus',
        label: 'Claude 4.6 Opus Extended (Estimated)',
        data: [98.5, 97.4, 96.3, 95.2, 94.1, null],
        borderColor: 'rgba(160, 160, 175, 0.6)',
        backgroundColor: 'rgba(160, 160, 175, 0.15)',
        borderWidth: 2,
        borderDash: [4, 4],
        tension: 0,
        pointRadius: 0,
        pointHoverRadius: 0,
        fill: '+1',
        spanGaps: false,
        sortOrder: 63,
        isEstimatedBand: true
      },
      {
        modelId: 'claude-46-opus',
        label: 'Claude 4.6 Opus Extended (Estimated Upper)',
        data: [100, 100, 100, 100, 100, null],
        borderColor: 'transparent',
        backgroundColor: 'transparent',
        borderWidth: 0,
        tension: 0,
        pointRadius: 0,
        pointHoverRadius: 0,
        spanGaps: false,
        sortOrder: 64,
        isEstimatedBand: true,
        isUpperBound: true
      },
      {
        modelId: 'claude-opus',
        label: 'Claude 4.5 Opus Extended',
        data: [78.0, 56.2, 46.7, 35.3, 27.1, null],
        borderColor: claudeLegacyColor,
        backgroundColor: claudeLegacyColorLight,
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: claudeLegacyColor,
        spanGaps: false,
        sortOrder: 70
      },
      {
        modelId: 'claude-sonnet',
        label: 'Claude 4.5 Sonnet Extended',
        data: [48.9, 42.4, 32.8, 26.0, 16.6, null],
        borderColor: 'rgba(249, 115, 22, 0.7)',
        backgroundColor: 'rgba(249, 115, 22, 0.5)',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(249, 115, 22, 0.7)',
        spanGaps: false,
        sortOrder: 80
      },
      {
        modelId: 'claude-haiku',
        label: 'Claude 4.5 Haiku Extended',
        data: [52.9, 38.6, 29.0, 23.3, 14.1, null],
        borderColor: 'rgba(249, 115, 22, 0.5)',
        backgroundColor: 'rgba(249, 115, 22, 0.3)',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'rgba(249, 115, 22, 0.5)',
        spanGaps: false,
        sortOrder: 90
      }
    ];

    function getMrcrDatasets() {
      // Filter datasets based on modelVisibility
      let datasets = mrcrAllDatasets.filter(ds => modelVisibility[ds.modelId]);

      // Sort by sortOrder to maintain family grouping in legend
      datasets.sort((a, b) => a.sortOrder - b.sortOrder);

      return datasets;
    }

    // MRCR v2 8-Needle Benchmark - Line Chart
    const mrcrCtx = document.getElementById('mrcrChart').getContext('2d');
    mrcrChart = new Chart(mrcrCtx, {
      type: 'line',
      data: {
        labels: ['8k', '16k', '32k', '64k', '128k', '1M'],
        datasets: getMrcrDatasets()
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            labels: {
              padding: 20,
              usePointStyle: true,
              pointStyle: 'circle',
              filter: function (item, chartData) {
                // Hide the upper bound helper dataset from legend
                const ds = chartData.datasets[item.datasetIndex];
                return !ds.isUpperBound;
              }
            }
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                // Skip upper bound helper dataset in tooltip
                if (context.dataset.isUpperBound) return null;
                if (context.parsed.y === null) return context.dataset.label + ': Not supported';
                // Show estimated label for the band
                if (context.dataset.isEstimatedBand) return 'Claude 4.6 Opus: ≥93% (estimado)';
                return context.dataset.label + ': ' + context.parsed.y + '%';
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            },
            title: {
              display: true,
              text: 'Accuracy',
              color: '#8a7d65'
            }
          },
          x: {
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            },
            title: {
              display: true,
              text: 'Context Length (tokens)',
              color: '#8a7d65'
            }
          }
        }
      }
    });

    // Long Context Reasoning - AA-LCR - Horizontal Bar Chart
    let lcrChart;
    const lcrAllModels = [
      { modelId: 'gpt-codex', label: '⌘ GPT 5.2 Codex', score: 75.7, sortOrder: 10 },
      { modelId: 'gpt-xhigh', label: '⌘ GPT 5.2 Thinking xhigh', score: 72.7, sortOrder: 15 },
      { modelId: 'gpt-thinking', label: '⌘ GPT 5.2 Thinking', score: 63.3, sortOrder: 20 },
      { modelId: 'gpt-thinking-mini', label: '⌘ GPT 5 Thinking Mini', score: 66, sortOrder: 25 },
      { modelId: 'gpt-instant', label: '⌘ GPT 5.2 Instant', score: 38.0, sortOrder: 30 },
      { modelId: 'gemini-pro', label: '✦ Gemini 3 Pro', score: 70.7, sortOrder: 40 },
      { modelId: 'gemini-flash-thinking', label: '✦ Gemini 3 Flash Thinking', score: 66.3, sortOrder: 50 },
      { modelId: 'gemini-flash', label: '✦ Gemini 3 Flash', score: 48.0, sortOrder: 60 },
      { modelId: 'claude-46-opus', label: '❋ Claude 4.6 Opus Extended', score: 70.7, sortOrder: 65 },
      { modelId: 'claude-46-opus-nr', label: '❋ Claude 4.6 Opus', score: 58.3, sortOrder: 66 },
      { modelId: 'claude-opus', label: '❋ Claude Opus 4.5 Extended', score: 74.0, sortOrder: 70 },
      { modelId: 'claude-opus-nr', label: '❋ Claude Opus 4.5', score: 65.3, sortOrder: 75 },
      { modelId: 'claude-sonnet', label: '❋ Claude 4.5 Sonnet Extended', score: 65.7, sortOrder: 80 },
      { modelId: 'claude-sonnet-nr', label: '❋ Claude 4.5 Sonnet', score: 51.3, sortOrder: 85 },
      { modelId: 'claude-haiku', label: '❋ Claude 4.5 Haiku Extended', score: 70.3, sortOrder: 90 },
      { modelId: 'claude-haiku-nr', label: '❋ Claude 4.5 Haiku', score: 43.7, sortOrder: 95 }
    ];

    function getLcrData() {
      // Filter models based on modelVisibility
      let models = lcrAllModels.filter(m => modelVisibility[m.modelId]);

      // Sort by sortOrder to maintain family grouping
      models.sort((a, b) => a.sortOrder - b.sortOrder);

      // Extract arrays for Chart.js
      const labels = models.map(m => m.label);
      const data = models.map(m => m.score);

      // Create background colors array with striped pattern for non-reasoning models
      const baseColor = 'rgba(139, 92, 246, 0.7)';
      const borderColor = 'rgba(139, 92, 246, 1)';

      let backgroundColors;
      if (useStripedPatternsForNonReasoning) {
        const stripedPattern = createStripedPattern(baseColor);
        backgroundColors = labels.map(label => {
          // Non-reasoning models get striped pattern
          if (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') {
            return stripedPattern;
          }
          return baseColor;
        });
      } else {
        backgroundColors = baseColor;
      }

      return { labels, data, backgroundColors, borderColor };
    }

    const lcrCtx = document.getElementById('lcrChart').getContext('2d');
    const lcrInitData = getLcrData();
    lcrChart = new Chart(lcrCtx, {
      type: 'bar',
      data: {
        labels: lcrInitData.labels,
        datasets: [{
          label: 'Score ↑',
          data: lcrInitData.data,
          backgroundColor: lcrInitData.backgroundColors,
          borderColor: lcrInitData.borderColor,
          borderWidth: 1,
          borderRadius: 4
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                return context.parsed.x + '%';
              }
            }
          }
        },
        scales: {
          x: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            }
          },
          y: {
            grid: {
              display: false
            }
          }
        }
      }
    });

    // Visual Reasoning - MMMU-Pro - Horizontal Bar Chart
    let mmmuProChart;
    const mmmuProAllModels = [
      { modelId: 'gpt-codex', label: '⌘ GPT 5.2 Codex', score: 76, sortOrder: 10 },
      { modelId: 'gpt-xhigh', label: '⌘ GPT 5.2 Thinking xhigh', score: 79, sortOrder: 15 },
      { modelId: 'gpt-thinking', label: '⌘ GPT 5.2 Thinking', score: 75, sortOrder: 20 },
      { modelId: 'gpt-thinking-mini', label: '⌘ GPT 5 Thinking Mini', score: 69, sortOrder: 25 },
      { modelId: 'gpt-instant', label: '⌘ GPT 5.2 Instant', score: 66, sortOrder: 30 },
      { modelId: 'gemini-pro', label: '✦ Gemini 3 Pro', score: 80, sortOrder: 40 },
      { modelId: 'gemini-flash-thinking', label: '✦ Gemini 3 Flash Thinking', score: 80, sortOrder: 50 },
      { modelId: 'gemini-flash', label: '✦ Gemini 3 Flash', score: 79, sortOrder: 60 },
      { modelId: 'claude-46-opus', label: '❋ Claude 4.6 Opus Extended', score: 75, sortOrder: 65 },
      { modelId: 'claude-46-opus-nr', label: '❋ Claude 4.6 Opus', score: 73, sortOrder: 66 },
      { modelId: 'claude-opus', label: '❋ Claude Opus 4.5 Extended', score: 74, sortOrder: 70 },
      { modelId: 'claude-opus-nr', label: '❋ Claude Opus 4.5', score: 71, sortOrder: 75 },
      { modelId: 'claude-sonnet', label: '❋ Claude 4.5 Sonnet Extended', score: 69, sortOrder: 80 },
      { modelId: 'claude-sonnet-nr', label: '❋ Claude 4.5 Sonnet', score: 65, sortOrder: 85 },
      { modelId: 'claude-haiku', label: '❋ Claude 4.5 Haiku Extended', score: 58, sortOrder: 90 },
      { modelId: 'claude-haiku-nr', label: '❋ Claude 4.5 Haiku', score: 55, sortOrder: 95 }
    ];

    function getMmmuProData() {
      // Filter models based on modelVisibility
      let models = mmmuProAllModels.filter(m => modelVisibility[m.modelId]);

      // Sort by sortOrder to maintain family grouping
      models.sort((a, b) => a.sortOrder - b.sortOrder);

      // Extract arrays for Chart.js
      const labels = models.map(m => m.label);
      const data = models.map(m => m.score);

      // Create background colors array with striped pattern for non-reasoning models
      const baseColor = 'rgba(139, 92, 246, 0.7)';
      const borderColor = 'rgba(139, 92, 246, 1)';

      let backgroundColors;
      if (useStripedPatternsForNonReasoning) {
        const stripedPattern = createStripedPattern(baseColor);
        backgroundColors = labels.map(label => {
          // Non-reasoning models get striped pattern
          if (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') {
            return stripedPattern;
          }
          return baseColor;
        });
      } else {
        backgroundColors = baseColor;
      }

      return { labels, data, backgroundColors, borderColor };
    }

    const mmmuProCtx = document.getElementById('mmmuProChart').getContext('2d');
    const mmmuProInitData = getMmmuProData();
    mmmuProChart = new Chart(mmmuProCtx, {
      type: 'bar',
      data: {
        labels: mmmuProInitData.labels,
        datasets: [{
          label: 'Score ↑',
          data: mmmuProInitData.data,
          backgroundColor: mmmuProInitData.backgroundColors,
          borderColor: mmmuProInitData.borderColor,
          borderWidth: 1,
          borderRadius: 4
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                return context.parsed.x + '%';
              }
            }
          }
        },
        scales: {
          x: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            }
          },
          y: {
            grid: {
              display: false
            }
          }
        }
      }
    });

    // Terminal-Bench Hard - Horizontal Bar Chart
    let terminalBenchChart;
    const terminalBenchAllModels = [
      { modelId: 'gpt-codex', label: '⌘ GPT 5.2 Codex', score: 37.1, sortOrder: 10 },
      { modelId: 'gpt-xhigh', label: '⌘ GPT 5.2 Thinking xhigh', score: 47.0, sortOrder: 15 },
      { modelId: 'gpt-thinking', label: '⌘ GPT 5.2 Thinking', score: 43.2, sortOrder: 20 },
      { modelId: 'gpt-thinking-mini', label: '⌘ GPT 5 Thinking Mini', score: 28.8, sortOrder: 25 },
      { modelId: 'gpt-instant', label: '⌘ GPT 5.2 Instant', score: 31.8, sortOrder: 30 },
      { modelId: 'gemini-pro', label: '✦ Gemini 3 Pro', score: 41.7, sortOrder: 40 },
      { modelId: 'gemini-flash-thinking', label: '✦ Gemini 3 Flash Thinking', score: 38.6, sortOrder: 50 },
      { modelId: 'gemini-flash', label: '✦ Gemini 3 Flash', score: 31.8, sortOrder: 60 },
      { modelId: 'claude-46-opus', label: '❋ Claude 4.6 Opus Extended', score: 42.4, sortOrder: 65 },
      { modelId: 'claude-46-opus-nr', label: '❋ Claude 4.6 Opus', score: 48.5, sortOrder: 66 },
      { modelId: 'claude-opus', label: '❋ Claude Opus 4.5 Extended', score: 47.0, sortOrder: 70 },
      { modelId: 'claude-opus-nr', label: '❋ Claude Opus 4.5', score: 40.9, sortOrder: 75 },
      { modelId: 'claude-sonnet', label: '❋ Claude 4.5 Sonnet Extended', score: 35.6, sortOrder: 80 },
      { modelId: 'claude-sonnet-nr', label: '❋ Claude 4.5 Sonnet', score: 28.8, sortOrder: 85 },
      { modelId: 'claude-haiku', label: '❋ Claude 4.5 Haiku Extended', score: 27.3, sortOrder: 90 },
      { modelId: 'claude-haiku-nr', label: '❋ Claude 4.5 Haiku', score: 27.3, sortOrder: 95 }
    ];

    function getTerminalBenchData() {
      // Filter models based on modelVisibility
      let models = terminalBenchAllModels.filter(m => modelVisibility[m.modelId]);

      // Sort by sortOrder to maintain family grouping
      models.sort((a, b) => a.sortOrder - b.sortOrder);

      // Extract arrays for Chart.js
      const labels = models.map(m => m.label);
      const data = models.map(m => m.score);

      // Create background colors array with striped pattern for non-reasoning models
      const baseColor = 'rgba(59, 130, 246, 0.7)';
      const borderColor = 'rgba(59, 130, 246, 1)';

      let backgroundColors;
      if (useStripedPatternsForNonReasoning) {
        const stripedPattern = createStripedPattern(baseColor);
        backgroundColors = labels.map(label => {
          if (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') {
            return stripedPattern;
          }
          return baseColor;
        });
      } else {
        backgroundColors = baseColor;
      }

      return { labels, data, backgroundColors, borderColor };
    }

    const terminalBenchCtx = document.getElementById('terminalBenchChart').getContext('2d');
    const terminalBenchInitData = getTerminalBenchData();
    terminalBenchChart = new Chart(terminalBenchCtx, {
      type: 'bar',
      data: {
        labels: terminalBenchInitData.labels,
        datasets: [{
          label: 'Score ↑',
          data: terminalBenchInitData.data,
          backgroundColor: terminalBenchInitData.backgroundColors,
          borderColor: terminalBenchInitData.borderColor,
          borderWidth: 1,
          borderRadius: 4
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                return context.parsed.x + '%';
              }
            }
          }
        },
        scales: {
          x: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            }
          },
          y: {
            grid: {
              display: false
            }
          }
        }
      }
    });

    // τ²-Bench Telecom - Horizontal Bar Chart
    let tau2BenchChart;
    const tau2BenchAllModels = [
      { modelId: 'gpt-codex', label: '⌘ GPT 5.2 Codex', score: 92.1, sortOrder: 10 },
      { modelId: 'gpt-xhigh', label: '⌘ GPT 5.2 Thinking xhigh', score: 84.8, sortOrder: 15 },
      { modelId: 'gpt-thinking', label: '⌘ GPT 5.2 Thinking', score: 74.3, sortOrder: 20 },
      { modelId: 'gpt-thinking-mini', label: '⌘ GPT 5 Thinking Mini', score: 71.1, sortOrder: 25 },
      { modelId: 'gpt-instant', label: '⌘ GPT 5.2 Instant', score: 46.5, sortOrder: 30 },
      { modelId: 'gemini-pro', label: '✦ Gemini 3 Pro', score: 87.1, sortOrder: 40 },
      { modelId: 'gemini-flash-thinking', label: '✦ Gemini 3 Flash Thinking', score: 80.4, sortOrder: 50 },
      { modelId: 'gemini-flash', label: '✦ Gemini 3 Flash', score: 43.3, sortOrder: 60 },
      { modelId: 'claude-46-opus', label: '❋ Claude 4.6 Opus Extended', score: 92.1, sortOrder: 65 },
      { modelId: 'claude-46-opus-nr', label: '❋ Claude 4.6 Opus', score: 84.8, sortOrder: 66 },
      { modelId: 'claude-opus', label: '❋ Claude Opus 4.5 Extended', score: 89.5, sortOrder: 70 },
      { modelId: 'claude-opus-nr', label: '❋ Claude Opus 4.5', score: 86.3, sortOrder: 75 },
      { modelId: 'claude-sonnet', label: '❋ Claude 4.5 Sonnet Extended', score: 78.1, sortOrder: 80 },
      { modelId: 'claude-sonnet-nr', label: '❋ Claude 4.5 Sonnet', score: 70.5, sortOrder: 85 },
      { modelId: 'claude-haiku', label: '❋ Claude 4.5 Haiku Extended', score: 54.7, sortOrder: 90 },
      { modelId: 'claude-haiku-nr', label: '❋ Claude 4.5 Haiku', score: 32.5, sortOrder: 95 }
    ];

    function getTau2BenchData() {
      // Filter models based on modelVisibility
      let models = tau2BenchAllModels.filter(m => modelVisibility[m.modelId]);

      // Sort by sortOrder to maintain family grouping
      models.sort((a, b) => a.sortOrder - b.sortOrder);

      // Extract arrays for Chart.js
      const labels = models.map(m => m.label);
      const data = models.map(m => m.score);

      // Create background colors array with striped pattern for non-reasoning models
      const baseColor = 'rgba(59, 130, 246, 0.7)';
      const borderColor = 'rgba(59, 130, 246, 1)';

      let backgroundColors;
      if (useStripedPatternsForNonReasoning) {
        const stripedPattern = createStripedPattern(baseColor);
        backgroundColors = labels.map(label => {
          if (label === 'GPT 5.2 Instant' || label === 'Gemini 3 Flash') {
            return stripedPattern;
          }
          return baseColor;
        });
      } else {
        backgroundColors = baseColor;
      }

      return { labels, data, backgroundColors, borderColor };
    }

    const tau2BenchCtx = document.getElementById('tau2BenchChart').getContext('2d');
    const tau2BenchInitData = getTau2BenchData();
    tau2BenchChart = new Chart(tau2BenchCtx, {
      type: 'bar',
      data: {
        labels: tau2BenchInitData.labels,
        datasets: [{
          label: 'Score ↑',
          data: tau2BenchInitData.data,
          backgroundColor: tau2BenchInitData.backgroundColors,
          borderColor: tau2BenchInitData.borderColor,
          borderWidth: 1,
          borderRadius: 4
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.95)',
            titleColor: '#d9c5a2',
            bodyColor: '#b3a385',
            borderColor: 'rgba(255, 255, 255, 0.1)',
            borderWidth: 1,
            padding: 12,
            cornerRadius: 8,
            callbacks: {
              label: function (context) {
                return context.parsed.x + '%';
              }
            }
          }
        },
        scales: {
          x: {
            beginAtZero: true,
            max: 100,
            ticks: {
              callback: function (value) {
                return value + '%';
              }
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.05)'
            }
          },
          y: {
            grid: {
              display: false
            }
          }
        }
      }
    });

    // Toggle function for subjective recommendations
    function toggleSubjective() {
      const toggle = document.querySelector('.subjective-toggle .toggle-switch');
      const tabContent = document.getElementById('tab-specs');
      toggle.classList.toggle('active');
      tabContent.classList.toggle('hide-subjective');
      // Save state to localStorage
      localStorage.setItem('subjectiveToggleActive', toggle.classList.contains('active'));
    }

    // Toggle function for USA-exclusive features
    // DEV REMINDER: When USA-exclusive is OFF, Gemini Pro loses "ecosystem memory" advantage,
    // so ChatGPT Plus becomes the better option for Memory features
    function toggleUSAExclusive() {
      const toggle = document.querySelector('.usa-toggle .toggle-switch');
      const tabContent = document.getElementById('tab-specs');
      toggle.classList.toggle('active');
      tabContent.classList.toggle('hide-usa-exclusive');
      // Save state to localStorage
      localStorage.setItem('usaExclusiveToggleActive', toggle.classList.contains('active'));

      // Toggle Memory features ratings based on USA-exclusive state
      const isUSAExclusiveOn = toggle.classList.contains('active');

      // $0-$20 table cells
      const memoryGeminiPro = document.getElementById('memory-gemini-pro');
      const memoryChatGPTPlus = document.getElementById('memory-chatgpt-plus');
      // $200-$250 table cells
      const memoryGeminiUltra = document.getElementById('memory-gemini-ultra');
      const memoryChatGPTPro = document.getElementById('memory-chatgpt-pro');
      // Agent mode cells ($200-$250)
      const agentGeminiUltra = document.getElementById('agent-gemini-ultra');
      const agentChatGPTPro = document.getElementById('agent-chatgpt-pro');

      if (isUSAExclusiveOn) {
        // USA features ON: Gemini has ecosystem memory advantage
        memoryGeminiPro.classList.add('rating-great');
        memoryChatGPTPlus.classList.remove('rating-excellent');
        memoryChatGPTPlus.classList.add('rating-great');
        memoryGeminiUltra.classList.add('rating-great');
        memoryChatGPTPro.classList.remove('rating-excellent');
        memoryChatGPTPro.classList.add('rating-great');
        // Agent mode: Gemini Ultra has 6000 uses (USA only)
        agentGeminiUltra.classList.add('rating-excellent');
        agentChatGPTPro.classList.remove('rating-excellent');
        agentChatGPTPro.classList.add('rating-great');
      } else {
        // USA features OFF: Gemini loses ecosystem memory, ChatGPT becomes excellent
        memoryGeminiPro.classList.remove('rating-great');
        memoryChatGPTPlus.classList.remove('rating-great');
        memoryChatGPTPlus.classList.add('rating-excellent');
        memoryGeminiUltra.classList.remove('rating-great');
        memoryChatGPTPro.classList.remove('rating-great');
        memoryChatGPTPro.classList.add('rating-excellent');
        // Agent mode: Gemini Ultra has no agent mode without USA
        agentGeminiUltra.classList.remove('rating-excellent');
        agentChatGPTPro.classList.remove('rating-great');
        agentChatGPTPro.classList.add('rating-excellent');
      }
    }

    // Toggle function for price tier with animation
    function switchPriceTier(tier) {
      const freeBtn = document.getElementById('btn-tier-free');
      const lowBtn = document.getElementById('btn-tier-low');
      const highBtn = document.getElementById('btn-tier-high');
      const freeTable = document.getElementById('table-free-tier');
      const lowTable = document.getElementById('table-low-tier');
      const highTable = document.getElementById('table-high-tier');

      const allButtons = [freeBtn, lowBtn, highBtn];
      const allTables = [freeTable, lowTable, highTable];

      // Find current visible table
      const currentTable = allTables.find(t => !t.classList.contains('hidden'));
      const nextTable = tier === 'free' ? freeTable : (tier === 'low' ? lowTable : highTable);

      // If clicking the same tier, do nothing
      if (currentTable === nextTable) return;

      // Update button states immediately
      allButtons.forEach(btn => btn.classList.remove('active'));
      if (tier === 'free') {
        freeBtn.classList.add('active');
      } else if (tier === 'low') {
        lowBtn.classList.add('active');
      } else {
        highBtn.classList.add('active');
      }

      // Fade out current table
      currentTable.classList.add('fade-out');

      // After fade out, switch tables and fade in
      setTimeout(() => {
        allTables.forEach(t => t.classList.add('hidden'));
        allTables.forEach(t => t.classList.remove('fade-out'));
        nextTable.classList.remove('hidden');
        nextTable.classList.add('fade-in');

        // Remove animation class after it completes
        setTimeout(() => {
          nextTable.classList.remove('fade-in');
        }, 350);
      }, 150);
      // Save state to localStorage
      localStorage.setItem('priceTier', tier);
    }

    // Toggle function for Claude models - syncs all toggles
    function toggleClaudeModels() {
      showClaudeModels = !showClaudeModels;

      // If turning ON and all models are explicitly disabled, reset explicit flags
      if (showClaudeModels) {
        const allExplicitlyDisabled = modelGroups.claude.every(m => modelExplicitlyDisabled[m]);
        if (allExplicitlyDisabled) {
          modelGroups.claude.forEach(m => { modelExplicitlyDisabled[m] = false; });
        }
      }

      // Update modelVisibility for Claude models respecting constraints
      modelGroups.claude.forEach(modelId => {
        if (showClaudeModels) {
          // When turning ON: only activate if ALL constraints are met
          modelVisibility[modelId] = shouldModelBeVisible(modelId);
        } else {
          // When turning OFF: always disable
          modelVisibility[modelId] = false;
        }
      });

      // Sync all Claude toggles
      document.querySelectorAll('.claude-toggle').forEach(toggle => {
        toggle.classList.toggle('active', showClaudeModels);
      });

      // Update UI and charts
      updateModelDotsUI();
      syncGroupToggles();
      updateLegacyFlags();
      updateAllCharts();

      // Save state to localStorage
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
      localStorage.setItem('claudeModelsVisible', showClaudeModels);
    }

    // Toggle function for Instant models - syncs all toggles
    function toggleInstantModels() {
      showInstantModels = !showInstantModels;

      // If turning ON and all models are explicitly disabled, reset explicit flags
      if (showInstantModels) {
        const allExplicitlyDisabled = modelGroups.instant.every(m => modelExplicitlyDisabled[m]);
        if (allExplicitlyDisabled) {
          modelGroups.instant.forEach(m => { modelExplicitlyDisabled[m] = false; });
        }
      }

      // Update modelVisibility for instant models respecting constraints
      modelGroups.instant.forEach(modelId => {
        if (showInstantModels) {
          // When turning ON: only activate if ALL constraints are met
          modelVisibility[modelId] = shouldModelBeVisible(modelId);
        } else {
          // When turning OFF: always disable
          modelVisibility[modelId] = false;
        }
      });

      // Sync all Instant toggles
      document.querySelectorAll('.instant-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', showInstantModels);
      });

      // Update UI and charts
      updateModelDotsUI();
      syncGroupToggles();
      updateLegacyFlags();
      updateAllCharts();

      // Save state to localStorage
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
      localStorage.setItem('instantModelsVisible', showInstantModels);
    }

    // Toggle function for ChatGPT Pro models - syncs all toggles
    function toggleChatGPTProModels() {
      showChatGPTProModels = !showChatGPTProModels;

      // If turning ON and all models are explicitly disabled, reset explicit flags
      if (showChatGPTProModels) {
        const allExplicitlyDisabled = modelGroups['chatgpt-pro'].every(m => modelExplicitlyDisabled[m]);
        if (allExplicitlyDisabled) {
          modelGroups['chatgpt-pro'].forEach(m => { modelExplicitlyDisabled[m] = false; });
        }
      }

      // Update modelVisibility for ChatGPT Pro models respecting constraints
      modelGroups['chatgpt-pro'].forEach(modelId => {
        if (showChatGPTProModels) {
          // When turning ON: only activate if ALL constraints are met
          modelVisibility[modelId] = shouldModelBeVisible(modelId);
        } else {
          // When turning OFF: always disable
          modelVisibility[modelId] = false;
        }
      });

      // Sync all ChatGPT Pro toggles
      document.querySelectorAll('.chatgpt-pro-model-toggle').forEach(toggle => {
        toggle.classList.toggle('active', showChatGPTProModels);
      });

      // Update UI and charts
      updateModelDotsUI();
      syncGroupToggles();
      updateLegacyFlags();
      updateAllCharts();

      // Save state to localStorage
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
      localStorage.setItem('chatgptProModelsVisible', showChatGPTProModels);
    }

    // Toggle function for Coding benchmarks section only (not the Codex model)
    function toggleCodingSection() {
      showCodingBenchmarks = !showCodingBenchmarks;

      // Toggle visibility of coding benchmark sections
      const benchmarksTab = document.getElementById('tab-benchmarks');
      benchmarksTab.classList.toggle('hide-coding-benchmarks', !showCodingBenchmarks);

      // Update the coding section dot
      const codingDot = document.querySelector('[data-model="coding-benchmarks"]');
      if (codingDot) {
        codingDot.classList.toggle('inactive', !showCodingBenchmarks);
      }

      // Sync coding group toggle
      document.querySelectorAll('.coding-bench-toggle').forEach(toggle => {
        // Toggle is active if either benchmarks OR codex model is active
        const codexVisible = modelVisibility['gpt-codex'];
        toggle.classList.toggle('active', showCodingBenchmarks || codexVisible);
      });

      // Save state
      localStorage.setItem('codingBenchmarksVisible', showCodingBenchmarks);
    }

    // Toggle function for Coding benchmarks group - controls both section and Codex model together
    function toggleCodingBenchmarks() {
      // Determine new state based on whether both are currently on
      const bothOn = showCodingBenchmarks && modelVisibility['gpt-codex'];
      const newState = !bothOn;

      showCodingBenchmarks = newState;

      // If turning ON and all models are explicitly disabled, reset explicit flags
      if (newState) {
        const allExplicitlyDisabled = modelGroups.coding.every(m => modelExplicitlyDisabled[m]);
        if (allExplicitlyDisabled) {
          modelGroups.coding.forEach(m => { modelExplicitlyDisabled[m] = false; });
        }
      }

      // Update Codex model visibility respecting constraints
      if (newState) {
        // When turning ON: only activate if ALL constraints are met
        modelVisibility['gpt-codex'] = shouldModelBeVisible('gpt-codex');
      } else {
        // When turning OFF: always disable
        modelVisibility['gpt-codex'] = false;
      }

      // Sync all Coding toggles
      document.querySelectorAll('.coding-bench-toggle').forEach(toggle => {
        toggle.classList.toggle('active', newState);
      });

      // Toggle visibility of coding benchmark sections
      const benchmarksTab = document.getElementById('tab-benchmarks');
      benchmarksTab.classList.toggle('hide-coding-benchmarks', !showCodingBenchmarks);

      // Update UI and charts
      updateModelDotsUI();
      syncGroupToggles();
      updateLegacyFlags();
      updateAllCharts();

      // Update the coding section dot
      const codingDot = document.querySelector('[data-model="coding-benchmarks"]');
      if (codingDot) {
        codingDot.classList.toggle('inactive', !showCodingBenchmarks);
      }

      // Save state to localStorage
      localStorage.setItem('modelVisibility', JSON.stringify(modelVisibility));
      localStorage.setItem('modelExplicitlyDisabled', JSON.stringify(modelExplicitlyDisabled));
      localStorage.setItem('codingBenchmarksVisible', showCodingBenchmarks);
    }

    // Initialize saved toggle states from localStorage on page load
    function initializeSavedStates() {
      let needsChartUpdate = false;

      // Restore modelVisibility from localStorage
      const savedModelVisibility = localStorage.getItem('modelVisibility');
      if (savedModelVisibility) {
        try {
          const parsedVisibility = JSON.parse(savedModelVisibility);
          // Merge saved visibility with defaults (in case new models were added)
          Object.keys(parsedVisibility).forEach(key => {
            if (key in modelVisibility) {
              modelVisibility[key] = parsedVisibility[key];
            }
          });
          needsChartUpdate = true;
        } catch (e) {
          console.error('Failed to parse saved modelVisibility:', e);
        }
      }

      // Restore modelExplicitlyDisabled from localStorage
      const savedExplicitlyDisabled = localStorage.getItem('modelExplicitlyDisabled');
      if (savedExplicitlyDisabled) {
        try {
          const parsedExplicit = JSON.parse(savedExplicitlyDisabled);
          // Merge saved explicit state with defaults (in case new models were added)
          Object.keys(parsedExplicit).forEach(key => {
            if (key in modelExplicitlyDisabled) {
              modelExplicitlyDisabled[key] = parsedExplicit[key];
            }
          });
        } catch (e) {
          console.error('Failed to parse saved modelExplicitlyDisabled:', e);
        }
      }

      // Restore filters panel state
      const savedFiltersPanel = localStorage.getItem('filtersPanelExpanded');
      if (savedFiltersPanel === 'true') {
        document.getElementById('modelFiltersPanel').classList.add('expanded');
      }

      // Restore coding benchmarks section visibility (separate from Codex model)
      const savedCodingBenchmarks = localStorage.getItem('codingBenchmarksVisible');
      if (savedCodingBenchmarks !== null) {
        showCodingBenchmarks = savedCodingBenchmarks === 'true';
      }

      // Restore group toggle states from localStorage (or derive from model visibility for backward compat)
      const savedClaudeModels = localStorage.getItem('claudeModelsVisible');
      showClaudeModels = savedClaudeModels !== null ? savedClaudeModels === 'true' : modelGroups.claude.some(m => modelVisibility[m]);

      const savedInstantModels = localStorage.getItem('instantModelsVisible');
      showInstantModels = savedInstantModels !== null ? savedInstantModels === 'true' : modelGroups.instant.some(m => modelVisibility[m]);

      const savedChatGPTProModels = localStorage.getItem('chatgptProModelsVisible');
      showChatGPTProModels = savedChatGPTProModels !== null ? savedChatGPTProModels === 'true' : modelGroups['chatgpt-pro'].some(m => modelVisibility[m]);

      const savedReasoningModels = localStorage.getItem('reasoningModelsVisible');
      showReasoningModels = savedReasoningModels !== null ? savedReasoningModels === 'true' : modelGroups.reasoning.some(m => modelVisibility[m]);

      // Update coding benchmarks section visibility
      const benchmarksTab = document.getElementById('tab-benchmarks');
      benchmarksTab.classList.toggle('hide-coding-benchmarks', !showCodingBenchmarks);

      // Update coding section dot
      const codingDot = document.querySelector('[data-model="coding-benchmarks"]');
      if (codingDot) {
        codingDot.classList.toggle('inactive', !showCodingBenchmarks);
      }

      // Update all toggle UIs
      syncGroupToggles();
      updateModelDotsUI();

      // Update charts if state changed from default
      if (needsChartUpdate) {
        // Update charts without animation (instant)
        const omniscienceData = getOmniscienceData();
        omniscienceChart.data.labels = omniscienceData.labels;
        omniscienceChart.data.datasets[0].data = omniscienceData.correct;
        omniscienceChart.data.datasets[0].backgroundColor = omniscienceData.correctBgColors;
        omniscienceChart.data.datasets[1].data = omniscienceData.abstention;
        omniscienceChart.data.datasets[1].backgroundColor = omniscienceData.abstentionBgColors;
        omniscienceChart.data.datasets[2].data = omniscienceData.hallucination;
        omniscienceChart.data.datasets[2].backgroundColor = omniscienceData.hallucinationBgColors;
        omniscienceChart.update('none');
        mrcrChart.data.datasets = getMrcrDatasets();
        mrcrChart.update('none');
        const lcrData = getLcrData();
        lcrChart.data.labels = lcrData.labels;
        lcrChart.data.datasets[0].data = lcrData.data;
        lcrChart.data.datasets[0].backgroundColor = lcrData.backgroundColors;
        lcrChart.update('none');
        const mmmuProData = getMmmuProData();
        mmmuProChart.data.labels = mmmuProData.labels;
        mmmuProChart.data.datasets[0].data = mmmuProData.data;
        mmmuProChart.data.datasets[0].backgroundColor = mmmuProData.backgroundColors;
        mmmuProChart.update('none');
        const terminalBenchData = getTerminalBenchData();
        terminalBenchChart.data.labels = terminalBenchData.labels;
        terminalBenchChart.data.datasets[0].data = terminalBenchData.data;
        terminalBenchChart.data.datasets[0].backgroundColor = terminalBenchData.backgroundColors;
        terminalBenchChart.update('none');
        const tau2BenchData = getTau2BenchData();
        tau2BenchChart.data.labels = tau2BenchData.labels;
        tau2BenchChart.data.datasets[0].data = tau2BenchData.data;
        tau2BenchChart.data.datasets[0].backgroundColor = tau2BenchData.backgroundColors;
        tau2BenchChart.update('none');
      }

      // Restore subjective toggle state
      const savedSubjective = localStorage.getItem('subjectiveToggleActive');
      if (savedSubjective === 'false') {
        // Default is active (ON), so we need to toggle OFF
        const subjectiveToggle = document.querySelector('.subjective-toggle .toggle-switch');
        const tabContent = document.getElementById('tab-specs');
        if (subjectiveToggle) {
          subjectiveToggle.classList.remove('active');
          tabContent.classList.add('hide-subjective');
        }
      }

      // Restore USA-exclusive toggle state
      const savedUSA = localStorage.getItem('usaExclusiveToggleActive');
      if (savedUSA === 'false') {
        // Default is active (ON), so we need to toggle OFF and apply all effects
        const usaToggle = document.querySelector('.usa-toggle .toggle-switch');
        const tabContent = document.getElementById('tab-specs');
        if (usaToggle) {
          usaToggle.classList.remove('active');
          tabContent.classList.add('hide-usa-exclusive');
          // Apply the rating changes for USA OFF state
          const memoryGeminiPro = document.getElementById('memory-gemini-pro');
          const memoryChatGPTPlus = document.getElementById('memory-chatgpt-plus');
          const memoryGeminiUltra = document.getElementById('memory-gemini-ultra');
          const memoryChatGPTPro = document.getElementById('memory-chatgpt-pro');
          const agentGeminiUltra = document.getElementById('agent-gemini-ultra');
          const agentChatGPTPro = document.getElementById('agent-chatgpt-pro');
          if (memoryGeminiPro) memoryGeminiPro.classList.remove('rating-great');
          if (memoryChatGPTPlus) {
            memoryChatGPTPlus.classList.remove('rating-great');
            memoryChatGPTPlus.classList.add('rating-excellent');
          }
          if (memoryGeminiUltra) memoryGeminiUltra.classList.remove('rating-great');
          if (memoryChatGPTPro) {
            memoryChatGPTPro.classList.remove('rating-great');
            memoryChatGPTPro.classList.add('rating-excellent');
          }
          if (agentGeminiUltra) agentGeminiUltra.classList.remove('rating-excellent');
          if (agentChatGPTPro) {
            agentChatGPTPro.classList.remove('rating-great');
            agentChatGPTPro.classList.add('rating-excellent');
          }
        }
      }

      // Restore price tier selection
      const savedTier = localStorage.getItem('priceTier');
      if (savedTier && savedTier !== 'low') {
        // Default is 'low', so only switch if different
        const freeBtn = document.getElementById('btn-tier-free');
        const lowBtn = document.getElementById('btn-tier-low');
        const highBtn = document.getElementById('btn-tier-high');
        const freeTable = document.getElementById('table-free-tier');
        const lowTable = document.getElementById('table-low-tier');
        const highTable = document.getElementById('table-high-tier');

        if (freeBtn && lowBtn && highBtn && freeTable && lowTable && highTable) {
          // Remove active from all buttons, hide all tables
          [freeBtn, lowBtn, highBtn].forEach(btn => btn.classList.remove('active'));
          [freeTable, lowTable, highTable].forEach(table => table.classList.add('hidden'));

          // Activate the saved tier
          if (savedTier === 'free') {
            freeBtn.classList.add('active');
            freeTable.classList.remove('hidden');
          } else if (savedTier === 'high') {
            highBtn.classList.add('active');
            highTable.classList.remove('hidden');
          }
        }
      }

      // Restore main tab selection
      const savedMainTab = localStorage.getItem('activeMainTab');
      if (savedMainTab && savedMainTab !== 'specs') {
        // Default is 'specs', so only switch if different
        const specsBtn = document.getElementById('btn-specs');
        const benchmarksBtn = document.getElementById('btn-benchmarks');
        const benefitsBtn = document.getElementById('btn-benefits');
        const specsTab = document.getElementById('tab-specs');
        const benchmarksTab = document.getElementById('tab-benchmarks');
        const benefitsTab = document.getElementById('tab-benefits');

        if (specsBtn && benchmarksBtn && benefitsBtn && specsTab && benchmarksTab && benefitsTab) {
          // Remove active from all buttons and tabs
          [specsBtn, benchmarksBtn, benefitsBtn].forEach(btn => btn.classList.remove('active'));
          [specsTab, benchmarksTab, benefitsTab].forEach(tab => tab.classList.remove('active'));

          // Activate the saved tab
          if (savedMainTab === 'benchmarks') {
            benchmarksBtn.classList.add('active');
            benchmarksTab.classList.add('active');
            // Fix for Chart.js timing issues: trigger resize after tab is visible
            setTimeout(() => {
              if (typeof omniscienceChart !== 'undefined') omniscienceChart.resize();
              if (typeof mrcrChart !== 'undefined') mrcrChart.resize();
              if (typeof lcrChart !== 'undefined') lcrChart.resize();
              if (typeof mmmuProChart !== 'undefined') mmmuProChart.resize();
              if (typeof terminalBenchChart !== 'undefined') terminalBenchChart.resize();
              if (typeof tau2BenchChart !== 'undefined') tau2BenchChart.resize();
            }, 50);
          } else if (savedMainTab === 'benefits') {
            benefitsBtn.classList.add('active');
            benefitsTab.classList.add('active');
          }
        }
      }
    }

    // Initialize states when DOM is ready
    initializeSavedStates();
  </script>

  <footer
    style="text-align: center; padding: 2rem 1rem; margin-top: 3rem; border-top: 1px solid var(--border-color); color: var(--text-muted); font-size: 0.8rem;">
    Made by <strong> u/Pasto_Shouwa</strong>
    <br>
    <em>Last updated on <strong>13/02/2026</strong> (dd/mm/yyyy)</em>
  </footer>
</body>

</html>
